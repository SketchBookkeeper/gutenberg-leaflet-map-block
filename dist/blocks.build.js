/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/*!***********************!*\
  !*** ./src/blocks.js ***!
  \***********************/
/*! no exports provided */
/*! all exports used */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("Object.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__block_block_js__ = __webpack_require__(/*! ./block/block.js */ 1);\n/**\n * Gutenberg Blocks\n *\n * All blocks related JavaScript files should be imported here.\n * You can create a new block folder in this dir and include code\n * for that block here as well.\n *\n * All blocks should be included here since this is the file that\n * Webpack is compiling as the input file.\n */\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9ibG9ja3MuanM/N2I1YiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEd1dGVuYmVyZyBCbG9ja3NcbiAqXG4gKiBBbGwgYmxvY2tzIHJlbGF0ZWQgSmF2YVNjcmlwdCBmaWxlcyBzaG91bGQgYmUgaW1wb3J0ZWQgaGVyZS5cbiAqIFlvdSBjYW4gY3JlYXRlIGEgbmV3IGJsb2NrIGZvbGRlciBpbiB0aGlzIGRpciBhbmQgaW5jbHVkZSBjb2RlXG4gKiBmb3IgdGhhdCBibG9jayBoZXJlIGFzIHdlbGwuXG4gKlxuICogQWxsIGJsb2NrcyBzaG91bGQgYmUgaW5jbHVkZWQgaGVyZSBzaW5jZSB0aGlzIGlzIHRoZSBmaWxlIHRoYXRcbiAqIFdlYnBhY2sgaXMgY29tcGlsaW5nIGFzIHRoZSBpbnB1dCBmaWxlLlxuICovXG5cbmltcG9ydCAnLi9ibG9jay9ibG9jay5qcyc7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvYmxvY2tzLmpzXG4vLyBtb2R1bGUgaWQgPSAwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n");

/***/ }),
/* 1 */
/*!****************************!*\
  !*** ./src/block/block.js ***!
  \****************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__style_scss__ = __webpack_require__(/*! ./style.scss */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__style_scss___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__style_scss__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__editor_scss__ = __webpack_require__(/*! ./editor.scss */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__editor_scss___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__editor_scss__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_leaflet_control_geocoder_dist_Control_Geocoder_css__ = __webpack_require__(/*! leaflet-control-geocoder/dist/Control.Geocoder.css */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_leaflet_control_geocoder_dist_Control_Geocoder_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_leaflet_control_geocoder_dist_Control_Geocoder_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_leaflet_control_geocoder_dist_images_geocoder_png__ = __webpack_require__(/*! leaflet-control-geocoder/dist/images/geocoder.png */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_leaflet_control_geocoder_dist_images_geocoder_png___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_leaflet_control_geocoder_dist_images_geocoder_png__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_leaflet_control_geocoder_dist_images_throbber_gif__ = __webpack_require__(/*! leaflet-control-geocoder/dist/images/throbber.gif */ 6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_leaflet_control_geocoder_dist_images_throbber_gif___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_leaflet_control_geocoder_dist_images_throbber_gif__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_leaflet_control_geocoder__ = __webpack_require__(/*! leaflet-control-geocoder */ 7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_leaflet_control_geocoder___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_leaflet_control_geocoder__);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * BLOCK: gutenberg-leaflet-map-block\n *\n * Registering a basic block with Gutenberg.\n *\n * Wishlist Options\n *\n * - Custom Colors\n * - Custom Markers\n * - Location, click or lookup\n * - Zoom level\n * - Map Height and Width\n * - Static?\n *\n */\n\n//  Import CSS.\n\n\n\n// Geocoder\n\n\n\n\n\nvar pluginUrl = window.gutenberg_leaflet_map_block.plugin_url;\nvar __ = wp.i18n.__; // Import __() from wp.i18n\n\nvar registerBlockType = wp.blocks.registerBlockType; // Import registerBlockType() from wp.blocks\n\nvar _wp$editor = wp.editor,\n    InspectorControls = _wp$editor.InspectorControls,\n    MediaUpload = _wp$editor.MediaUpload;\nvar _wp$element = wp.element,\n    Component = _wp$element.Component,\n    Fragment = _wp$element.Fragment;\nvar _wp$components = wp.components,\n    Button = _wp$components.Button,\n    Dashicon = _wp$components.Dashicon,\n    PanelBody = _wp$components.PanelBody,\n    ColorPalette = _wp$components.ColorPalette,\n    Placeholder = _wp$components.Placeholder,\n    RangeControl = _wp$components.RangeControl,\n    SelectControl = _wp$components.SelectControl,\n    Spinner = _wp$components.Spinner,\n    TextControl = _wp$components.TextControl,\n    ToggleControl = _wp$components.ToggleControl,\n    Notice = _wp$components.Notice,\n    IconButton = _wp$components.IconButton;\n\n/**\n * Register: a Gutenberg Block.\n *\n * Registers a new block provided a unique name and an object defining its\n * behavior. Once registered, the block is made editor as an option to any\n * editor interface where blocks are implemented.\n *\n * @link https://wordpress.org/gutenberg/handbook/block-api/\n * @param  {string}   name     Block name.\n * @param  {Object}   settings Block settings.\n * @return {?WPBlock}          The block, if it has been successfully\n *                             registered; otherwise `undefined`.\n */\n\nregisterBlockType('gutenberg-leaflet-map-block/block-gutenberg-leaflet-map-block', {\n\t// Block name. Block names must be string that contains a namespace prefix. Example: my-plugin/my-custom-block.\n\ttitle: __('Leaflet Map'), // Block title.\n\ticon: 'location', // Block icon from Dashicons → https://developer.wordpress.org/resource/dashicons/.\n\tcategory: 'embed', // Block category — Group blocks together based on common traits E.g. common, formatting, layout widgets, embed.\n\tkeywords: [__('Map'), __('Leaflet JS')],\n\n\tattributes: {\n\t\tmapLatLng: {\n\t\t\ttype: 'array',\n\t\t\tdefault: [51.505, -0.09]\n\t\t},\n\t\tmarkerLatLng: {\n\t\t\ttype: 'array',\n\t\t\tdefault: [51.505, -0.09]\n\t\t},\n\t\taddress: {\n\t\t\ttype: 'string',\n\t\t\tdefault: 'London, Greater London, England, United Kingdom'\n\t\t},\n\t\theight: {\n\t\t\ttype: 'integer',\n\t\t\tdefault: 300\n\t\t},\n\t\tzoom: {\n\t\t\ttype: 'integer',\n\t\t\tdefault: 12\n\t\t},\n\t\tmapContainerBackground: {\n\t\t\ttype: 'string',\n\t\t\tdefault: '#67B6E3'\n\t\t},\n\t\tcustomIconID: {\n\t\t\ttype: 'integer'\n\t\t},\n\t\tcustomIconURL: {\n\t\t\ttype: 'string'\n\t\t},\n\t\tcustomIconWidth: {\n\t\t\ttype: 'integer'\n\t\t},\n\t\tcustomIconHeight: {\n\t\t\ttype: 'integer'\n\t\t}\n\t},\n\n\tedit: function edit(props) {\n\t\treturn new mapBlock(props);\n\t},\n\n\tsave: function save(props) {\n\t\treturn wp.element.createElement('div', { 'data-gutenberg-leaflet-map-block': '{ \"maxZoom\": 18, \"id\": \"mapbox.streets\" }' });\n\t}\n});\n\n/**\n * Edit\n */\n\nvar mapBlock = function (_Component) {\n\t_inherits(mapBlock, _Component);\n\n\tfunction mapBlock(props) {\n\t\t_classCallCheck(this, mapBlock);\n\n\t\tvar _this = _possibleConstructorReturn(this, (mapBlock.__proto__ || Object.getPrototypeOf(mapBlock)).call(this, props));\n\n\t\t_this.mapContainer = React.createRef();\n\t\t_this.mapboxApiKey = window.gutenberg_leaflet_map_block.mapbox_api_key;\n\n\t\t_this.state = {\n\t\t\ticonError: false\n\t\t};\n\n\t\t_this.showIconError.bind(_this);\n\t\t_this.hideIconError.bind(_this);\n\t\treturn _this;\n\t}\n\n\t//\n\t// State Management\n\t//\n\n\n\t_createClass(mapBlock, [{\n\t\tkey: 'showIconError',\n\t\tvalue: function showIconError() {\n\t\t\tthis.setState({ iconError: true });\n\t\t}\n\t}, {\n\t\tkey: 'hideIconError',\n\t\tvalue: function hideIconError() {\n\t\t\tthis.setState({ iconError: false });\n\t\t}\n\n\t\t//\n\t\t// Update Methods\n\t\t//\n\n\t}, {\n\t\tkey: 'updateAddress',\n\t\tvalue: function updateAddress(value) {\n\t\t\tthis.props.setAttributes({\n\t\t\t\taddress: value\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'updateMapLatlng',\n\t\tvalue: function updateMapLatlng(value) {\n\t\t\tthis.props.setAttributes({\n\t\t\t\tmapLatLng: value\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'updateMarkerLatlng',\n\t\tvalue: function updateMarkerLatlng(value) {\n\t\t\tthis.props.setAttributes({\n\t\t\t\tmarkerLatLng: value\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'updateLocation',\n\t\tvalue: function updateLocation(latlng, address) {\n\t\t\t// Update multiple at once for expected responses from the\n\t\t\t// forward and back buttons in the Gutenberg UI.\n\t\t\tthis.props.setAttributes({\n\t\t\t\tmarkerLatLng: latlng,\n\t\t\t\tmapLatLng: latlng,\n\t\t\t\taddress: address\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'updateIcon',\n\t\tvalue: function updateIcon(icon) {\n\t\t\tthis.props.setAttributes({\n\t\t\t\tcustomIconID: icon.id,\n\t\t\t\tcustomIconURL: icon.url,\n\t\t\t\tcustomIconWidth: icon.width,\n\t\t\t\tcustomIconHeight: icon.height\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'removeIcon',\n\t\tvalue: function removeIcon() {\n\t\t\tthis.props.setAttributes({\n\t\t\t\tcustomIconID: null,\n\t\t\t\tcustomIconURL: null,\n\t\t\t\tcustomIconWidth: null,\n\t\t\t\tcustomIconHeight: null\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: 'validateIcon',\n\t\tvalue: function validateIcon(icon) {\n\t\t\tif (icon.mime !== 'image/png' || icon.height > 100 || icon.width > 100) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t\t//\n\t\t// Map Helper Functions\n\t\t//\n\n\t}, {\n\t\tkey: 'createCustomIcon',\n\t\tvalue: function createCustomIcon(iconUrl, iconWidth, iconHeight) {\n\t\t\t// Center the anchor point based the on the icon width\n\t\t\tvar iconAnchor = [iconWidth / 2, iconHeight];\n\n\t\t\treturn L.icon({\n\t\t\t\ticonUrl: iconUrl,\n\t\t\t\ticonAnchor: iconAnchor,\n\t\t\t\ticonSize: [iconWidth, iconHeight]\n\t\t\t});\n\t\t}\n\n\t\t//\n\t\t// Render\n\t\t//\n\n\t}, {\n\t\tkey: 'render',\n\t\tvalue: function render() {\n\t\t\tvar _this2 = this;\n\n\t\t\tvar _props = this.props,\n\t\t\t    attributes = _props.attributes,\n\t\t\t    setAttributes = _props.setAttributes;\n\n\n\t\t\tvar colors = [{ name: 'blue', color: '#67B6E3' }, { name: 'white', color: '#fff' }, { name: 'grey', color: '#A4BAB7' }];\n\n\t\t\tvar styles = {\n\t\t\t\theight: attributes.height + 'px',\n\t\t\t\tbackground: attributes.mapContainerBackground\n\t\t\t};\n\n\t\t\treturn wp.element.createElement(\n\t\t\t\tFragment,\n\t\t\t\tnull,\n\t\t\t\twp.element.createElement(\n\t\t\t\t\tInspectorControls,\n\t\t\t\t\tnull,\n\t\t\t\t\twp.element.createElement(\n\t\t\t\t\t\tPanelBody,\n\t\t\t\t\t\t{ title: __('Leaflet Map Settings') },\n\t\t\t\t\t\twp.element.createElement(RangeControl, {\n\t\t\t\t\t\t\tlabel: __('Height'),\n\t\t\t\t\t\t\tvalue: attributes.height,\n\t\t\t\t\t\t\tonChange: function onChange(value) {\n\t\t\t\t\t\t\t\treturn setAttributes({ height: value });\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tmin: 150,\n\t\t\t\t\t\t\tmax: 800\n\t\t\t\t\t\t}),\n\t\t\t\t\t\twp.element.createElement(RangeControl, {\n\t\t\t\t\t\t\tlabel: __('Default Zoom'),\n\t\t\t\t\t\t\tvalue: attributes.zoom,\n\t\t\t\t\t\t\tonChange: function onChange(value) {\n\t\t\t\t\t\t\t\tif (value > 18 || value < 2) {\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tsetAttributes({ zoom: value });\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tmin: 2,\n\t\t\t\t\t\t\tmax: 18\n\t\t\t\t\t\t}),\n\t\t\t\t\t\twp.element.createElement(\n\t\t\t\t\t\t\t'p',\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t'Map Background'\n\t\t\t\t\t\t),\n\t\t\t\t\t\twp.element.createElement(ColorPalette, {\n\t\t\t\t\t\t\tcolors: colors,\n\t\t\t\t\t\t\tvalue: attributes.mapContainerBackground,\n\t\t\t\t\t\t\tonChange: function onChange(value) {\n\t\t\t\t\t\t\t\tsetAttributes({\n\t\t\t\t\t\t\t\t\tmapContainerBackground: value\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}),\n\t\t\t\t\t\twp.element.createElement(\n\t\t\t\t\t\t\t'h2',\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t'Custom Icon'\n\t\t\t\t\t\t),\n\t\t\t\t\t\twp.element.createElement(\n\t\t\t\t\t\t\t'p',\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t'.png file, no larger than 100px by 100px'\n\t\t\t\t\t\t),\n\t\t\t\t\t\twp.element.createElement(MediaUpload, {\n\t\t\t\t\t\t\tonSelect: function onSelect(img) {\n\t\t\t\t\t\t\t\tif (!_this2.validateIcon(img)) {\n\t\t\t\t\t\t\t\t\t_this2.showIconError();\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t_this2.updateIcon(img);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttype: 'image',\n\t\t\t\t\t\t\tvalue: attributes.customIconID,\n\t\t\t\t\t\t\trender: function render(_ref) {\n\t\t\t\t\t\t\t\tvar open = _ref.open;\n\t\t\t\t\t\t\t\treturn wp.element.createElement(\n\t\t\t\t\t\t\t\t\tFragment,\n\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\t_this2.state.iconError ? wp.element.createElement(\n\t\t\t\t\t\t\t\t\t\tNotice,\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tclassName: 'glm-notice',\n\t\t\t\t\t\t\t\t\t\t\tstatus: 'error',\n\t\t\t\t\t\t\t\t\t\t\tonRemove: function onRemove() {\n\t\t\t\t\t\t\t\t\t\t\t\treturn _this2.hideIconError();\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\twp.element.createElement(\n\t\t\t\t\t\t\t\t\t\t\t'p',\n\t\t\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\t\t\t'Invalid Icon'\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t) : '',\n\t\t\t\t\t\t\t\t\twp.element.createElement(\n\t\t\t\t\t\t\t\t\t\tButton,\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tonClick: open,\n\t\t\t\t\t\t\t\t\t\t\tclassName: 'components-button is-button is-default is-large glm-upload-button'\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tattributes.customIconID ? wp.element.createElement('img', {\n\t\t\t\t\t\t\t\t\t\t\tsrc: attributes.customIconURL,\n\t\t\t\t\t\t\t\t\t\t\talt: 'Icon'\n\t\t\t\t\t\t\t\t\t\t}) : 'upload'\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tattributes.customIconID ? wp.element.createElement(\n\t\t\t\t\t\t\t\t\t\tButton,\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tonClick: function onClick() {\n\t\t\t\t\t\t\t\t\t\t\t\t_this2.removeIcon();\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\ttitle: 'remove icon'\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\twp.element.createElement(Dashicon, { icon: 'no' })\n\t\t\t\t\t\t\t\t\t) : ''\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t)\n\t\t\t\t),\n\t\t\t\twp.element.createElement(\n\t\t\t\t\t'div',\n\t\t\t\t\tnull,\n\t\t\t\t\twp.element.createElement(\n\t\t\t\t\t\t'p',\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\tthis.props.attributes.address\n\t\t\t\t\t),\n\t\t\t\t\twp.element.createElement('div', { style: styles, ref: this.mapContainer })\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\n\t\t//\n\t\t// Did Mount\n\t\t//\n\n\t}, {\n\t\tkey: 'componentDidMount',\n\t\tvalue: function componentDidMount() {\n\t\t\tvar _this3 = this;\n\n\t\t\tthis.map = L.map(this.mapContainer.current).setView(this.props.attributes.mapLatLng, this.props.attributes.zoom);\n\n\t\t\tvar markerOptions = {};\n\n\t\t\t// Set up custom marker icon\n\t\t\tif (this.props.attributes.customIconURL) {\n\t\t\t\tmarkerOptions.icon = this.createCustomIcon(this.props.attributes.customIconURL, this.props.attributes.customIconWidth, this.props.attributes.customIconHeight);\n\t\t\t}\n\n\t\t\tthis.marker = L.marker(this.props.attributes.markerLatLng, markerOptions).addTo(this.map);\n\n\t\t\t// Set Tiles\n\t\t\tL.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {\n\t\t\t\tattribution: 'Map data &copy; <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>',\n\t\t\t\tmaxZoom: 18,\n\t\t\t\tminZoom: 2,\n\t\t\t\tid: 'mapbox.streets',\n\t\t\t\taccessToken: this.mapboxApiKey\n\t\t\t}).addTo(this.map);\n\n\t\t\t// Geocoder search box\n\t\t\tL.Control.geocoder({\n\t\t\t\tdefaultMarkGeocode: false\n\t\t\t}).on('markgeocode', function (e) {\n\t\t\t\tvar latlng = [e.geocode.center.lat, e.geocode.center.lng];\n\n\t\t\t\t// Set new view for user\n\t\t\t\t_this3.map.flyTo(latlng);\n\n\t\t\t\t// Save location\n\t\t\t\t_this3.updateLocation(latlng, e.geocode.name);\n\t\t\t}).addTo(this.map);\n\n\t\t\t// Click to set location\n\t\t\tthis.map.on('click', function (e) {\n\t\t\t\tvar latlng = [e.latlng.lat, e.latlng.lng];\n\n\t\t\t\t// Get address name from latlng\n\t\t\t\tL.Control.Geocoder.nominatim().reverse(e.latlng, 18, function (results) {\n\t\t\t\t\t// Update the location\n\t\t\t\t\tif (!results.hasOwnProperty(0)) {\n\t\t\t\t\t\t_this3.updateLocation(latlng, 'unknown');\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_this3.updateLocation(latlng, results[0].name);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\t//\n\t\t// Did Update\n\t\t//\n\n\t}, {\n\t\tkey: 'componentDidUpdate',\n\t\tvalue: function componentDidUpdate(prevProps) {\n\t\t\t// Marker will update when the attribute is updated\n\t\t\tthis.marker.setLatLng(this.props.attributes.markerLatLng);\n\n\t\t\t// Preview zoom level if changed\n\t\t\tif (prevProps.attributes.zoom !== this.props.attributes.zoom) {\n\t\t\t\tthis.map.setZoom(this.props.attributes.zoom);\n\t\t\t}\n\n\t\t\t// Update Icon\n\t\t\tif (prevProps.attributes.customIconID !== this.props.attributes.customIconID) {\n\t\t\t\tvar newIcon = void 0;\n\n\t\t\t\t// Get the new icon if available\n\t\t\t\t// Otherwise get the original icon\n\t\t\t\tif (this.props.attributes.customIconID) {\n\t\t\t\t\tnewIcon = this.createCustomIcon(this.props.attributes.customIconURL, this.props.attributes.customIconWidth, this.props.attributes.customIconHeight);\n\t\t\t\t} else {\n\t\t\t\t\tvar defaultIcon = Object.assign({}, L.Icon.Default.prototype.options);\n\t\t\t\t\tvar mapImages = pluginUrl + '/vendor/images/';\n\n\t\t\t\t\tdefaultIcon.iconUrl = mapImages + defaultIcon.iconUrl;\n\t\t\t\t\tdefaultIcon.iconRetinaUrl = mapImages + defaultIcon.iconRetinaUrl;\n\t\t\t\t\tdefaultIcon.shadowUrl = mapImages + defaultIcon.shadowUrl;\n\n\t\t\t\t\tnewIcon = L.icon(defaultIcon);\n\t\t\t\t}\n\n\t\t\t\tthis.marker.setIcon(newIcon);\n\t\t\t}\n\t\t}\n\t}]);\n\n\treturn mapBlock;\n}(Component);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9ibG9jay9ibG9jay5qcz85MjFkIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxuLyoqXG4gKiBCTE9DSzogZ3V0ZW5iZXJnLWxlYWZsZXQtbWFwLWJsb2NrXG4gKlxuICogUmVnaXN0ZXJpbmcgYSBiYXNpYyBibG9jayB3aXRoIEd1dGVuYmVyZy5cbiAqXG4gKiBXaXNobGlzdCBPcHRpb25zXG4gKlxuICogLSBDdXN0b20gQ29sb3JzXG4gKiAtIEN1c3RvbSBNYXJrZXJzXG4gKiAtIExvY2F0aW9uLCBjbGljayBvciBsb29rdXBcbiAqIC0gWm9vbSBsZXZlbFxuICogLSBNYXAgSGVpZ2h0IGFuZCBXaWR0aFxuICogLSBTdGF0aWM/XG4gKlxuICovXG5cbi8vICBJbXBvcnQgQ1NTLlxuaW1wb3J0ICcuL3N0eWxlLnNjc3MnO1xuaW1wb3J0ICcuL2VkaXRvci5zY3NzJztcblxuLy8gR2VvY29kZXJcbmltcG9ydCAnbGVhZmxldC1jb250cm9sLWdlb2NvZGVyL2Rpc3QvQ29udHJvbC5HZW9jb2Rlci5jc3MnO1xuaW1wb3J0ICdsZWFmbGV0LWNvbnRyb2wtZ2VvY29kZXIvZGlzdC9pbWFnZXMvZ2VvY29kZXIucG5nJztcbmltcG9ydCAnbGVhZmxldC1jb250cm9sLWdlb2NvZGVyL2Rpc3QvaW1hZ2VzL3Rocm9iYmVyLmdpZic7XG5pbXBvcnQgJ2xlYWZsZXQtY29udHJvbC1nZW9jb2Rlcic7XG5cbnZhciBwbHVnaW5VcmwgPSB3aW5kb3cuZ3V0ZW5iZXJnX2xlYWZsZXRfbWFwX2Jsb2NrLnBsdWdpbl91cmw7XG52YXIgX18gPSB3cC5pMThuLl9fOyAvLyBJbXBvcnQgX18oKSBmcm9tIHdwLmkxOG5cblxudmFyIHJlZ2lzdGVyQmxvY2tUeXBlID0gd3AuYmxvY2tzLnJlZ2lzdGVyQmxvY2tUeXBlOyAvLyBJbXBvcnQgcmVnaXN0ZXJCbG9ja1R5cGUoKSBmcm9tIHdwLmJsb2Nrc1xuXG52YXIgX3dwJGVkaXRvciA9IHdwLmVkaXRvcixcbiAgICBJbnNwZWN0b3JDb250cm9scyA9IF93cCRlZGl0b3IuSW5zcGVjdG9yQ29udHJvbHMsXG4gICAgTWVkaWFVcGxvYWQgPSBfd3AkZWRpdG9yLk1lZGlhVXBsb2FkO1xudmFyIF93cCRlbGVtZW50ID0gd3AuZWxlbWVudCxcbiAgICBDb21wb25lbnQgPSBfd3AkZWxlbWVudC5Db21wb25lbnQsXG4gICAgRnJhZ21lbnQgPSBfd3AkZWxlbWVudC5GcmFnbWVudDtcbnZhciBfd3AkY29tcG9uZW50cyA9IHdwLmNvbXBvbmVudHMsXG4gICAgQnV0dG9uID0gX3dwJGNvbXBvbmVudHMuQnV0dG9uLFxuICAgIERhc2hpY29uID0gX3dwJGNvbXBvbmVudHMuRGFzaGljb24sXG4gICAgUGFuZWxCb2R5ID0gX3dwJGNvbXBvbmVudHMuUGFuZWxCb2R5LFxuICAgIENvbG9yUGFsZXR0ZSA9IF93cCRjb21wb25lbnRzLkNvbG9yUGFsZXR0ZSxcbiAgICBQbGFjZWhvbGRlciA9IF93cCRjb21wb25lbnRzLlBsYWNlaG9sZGVyLFxuICAgIFJhbmdlQ29udHJvbCA9IF93cCRjb21wb25lbnRzLlJhbmdlQ29udHJvbCxcbiAgICBTZWxlY3RDb250cm9sID0gX3dwJGNvbXBvbmVudHMuU2VsZWN0Q29udHJvbCxcbiAgICBTcGlubmVyID0gX3dwJGNvbXBvbmVudHMuU3Bpbm5lcixcbiAgICBUZXh0Q29udHJvbCA9IF93cCRjb21wb25lbnRzLlRleHRDb250cm9sLFxuICAgIFRvZ2dsZUNvbnRyb2wgPSBfd3AkY29tcG9uZW50cy5Ub2dnbGVDb250cm9sLFxuICAgIE5vdGljZSA9IF93cCRjb21wb25lbnRzLk5vdGljZSxcbiAgICBJY29uQnV0dG9uID0gX3dwJGNvbXBvbmVudHMuSWNvbkJ1dHRvbjtcblxuLyoqXG4gKiBSZWdpc3RlcjogYSBHdXRlbmJlcmcgQmxvY2suXG4gKlxuICogUmVnaXN0ZXJzIGEgbmV3IGJsb2NrIHByb3ZpZGVkIGEgdW5pcXVlIG5hbWUgYW5kIGFuIG9iamVjdCBkZWZpbmluZyBpdHNcbiAqIGJlaGF2aW9yLiBPbmNlIHJlZ2lzdGVyZWQsIHRoZSBibG9jayBpcyBtYWRlIGVkaXRvciBhcyBhbiBvcHRpb24gdG8gYW55XG4gKiBlZGl0b3IgaW50ZXJmYWNlIHdoZXJlIGJsb2NrcyBhcmUgaW1wbGVtZW50ZWQuXG4gKlxuICogQGxpbmsgaHR0cHM6Ly93b3JkcHJlc3Mub3JnL2d1dGVuYmVyZy9oYW5kYm9vay9ibG9jay1hcGkvXG4gKiBAcGFyYW0gIHtzdHJpbmd9ICAgbmFtZSAgICAgQmxvY2sgbmFtZS5cbiAqIEBwYXJhbSAge09iamVjdH0gICBzZXR0aW5ncyBCbG9jayBzZXR0aW5ncy5cbiAqIEByZXR1cm4gez9XUEJsb2NrfSAgICAgICAgICBUaGUgYmxvY2ssIGlmIGl0IGhhcyBiZWVuIHN1Y2Nlc3NmdWxseVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lzdGVyZWQ7IG90aGVyd2lzZSBgdW5kZWZpbmVkYC5cbiAqL1xuXG5yZWdpc3RlckJsb2NrVHlwZSgnZ3V0ZW5iZXJnLWxlYWZsZXQtbWFwLWJsb2NrL2Jsb2NrLWd1dGVuYmVyZy1sZWFmbGV0LW1hcC1ibG9jaycsIHtcblx0Ly8gQmxvY2sgbmFtZS4gQmxvY2sgbmFtZXMgbXVzdCBiZSBzdHJpbmcgdGhhdCBjb250YWlucyBhIG5hbWVzcGFjZSBwcmVmaXguIEV4YW1wbGU6IG15LXBsdWdpbi9teS1jdXN0b20tYmxvY2suXG5cdHRpdGxlOiBfXygnTGVhZmxldCBNYXAnKSwgLy8gQmxvY2sgdGl0bGUuXG5cdGljb246ICdsb2NhdGlvbicsIC8vIEJsb2NrIGljb24gZnJvbSBEYXNoaWNvbnMg4oaSIGh0dHBzOi8vZGV2ZWxvcGVyLndvcmRwcmVzcy5vcmcvcmVzb3VyY2UvZGFzaGljb25zLy5cblx0Y2F0ZWdvcnk6ICdlbWJlZCcsIC8vIEJsb2NrIGNhdGVnb3J5IOKAlCBHcm91cCBibG9ja3MgdG9nZXRoZXIgYmFzZWQgb24gY29tbW9uIHRyYWl0cyBFLmcuIGNvbW1vbiwgZm9ybWF0dGluZywgbGF5b3V0IHdpZGdldHMsIGVtYmVkLlxuXHRrZXl3b3JkczogW19fKCdNYXAnKSwgX18oJ0xlYWZsZXQgSlMnKV0sXG5cblx0YXR0cmlidXRlczoge1xuXHRcdG1hcExhdExuZzoge1xuXHRcdFx0dHlwZTogJ2FycmF5Jyxcblx0XHRcdGRlZmF1bHQ6IFs1MS41MDUsIC0wLjA5XVxuXHRcdH0sXG5cdFx0bWFya2VyTGF0TG5nOiB7XG5cdFx0XHR0eXBlOiAnYXJyYXknLFxuXHRcdFx0ZGVmYXVsdDogWzUxLjUwNSwgLTAuMDldXG5cdFx0fSxcblx0XHRhZGRyZXNzOiB7XG5cdFx0XHR0eXBlOiAnc3RyaW5nJyxcblx0XHRcdGRlZmF1bHQ6ICdMb25kb24sIEdyZWF0ZXIgTG9uZG9uLCBFbmdsYW5kLCBVbml0ZWQgS2luZ2RvbSdcblx0XHR9LFxuXHRcdGhlaWdodDoge1xuXHRcdFx0dHlwZTogJ2ludGVnZXInLFxuXHRcdFx0ZGVmYXVsdDogMzAwXG5cdFx0fSxcblx0XHR6b29tOiB7XG5cdFx0XHR0eXBlOiAnaW50ZWdlcicsXG5cdFx0XHRkZWZhdWx0OiAxMlxuXHRcdH0sXG5cdFx0bWFwQ29udGFpbmVyQmFja2dyb3VuZDoge1xuXHRcdFx0dHlwZTogJ3N0cmluZycsXG5cdFx0XHRkZWZhdWx0OiAnIzY3QjZFMydcblx0XHR9LFxuXHRcdGN1c3RvbUljb25JRDoge1xuXHRcdFx0dHlwZTogJ2ludGVnZXInXG5cdFx0fSxcblx0XHRjdXN0b21JY29uVVJMOiB7XG5cdFx0XHR0eXBlOiAnc3RyaW5nJ1xuXHRcdH0sXG5cdFx0Y3VzdG9tSWNvbldpZHRoOiB7XG5cdFx0XHR0eXBlOiAnaW50ZWdlcidcblx0XHR9LFxuXHRcdGN1c3RvbUljb25IZWlnaHQ6IHtcblx0XHRcdHR5cGU6ICdpbnRlZ2VyJ1xuXHRcdH1cblx0fSxcblxuXHRlZGl0OiBmdW5jdGlvbiBlZGl0KHByb3BzKSB7XG5cdFx0cmV0dXJuIG5ldyBtYXBCbG9jayhwcm9wcyk7XG5cdH0sXG5cblx0c2F2ZTogZnVuY3Rpb24gc2F2ZShwcm9wcykge1xuXHRcdHJldHVybiB3cC5lbGVtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgJ2RhdGEtZ3V0ZW5iZXJnLWxlYWZsZXQtbWFwLWJsb2NrJzogJ3sgXCJtYXhab29tXCI6IDE4LCBcImlkXCI6IFwibWFwYm94LnN0cmVldHNcIiB9JyB9KTtcblx0fVxufSk7XG5cbi8qKlxuICogRWRpdFxuICovXG5cbnZhciBtYXBCbG9jayA9IGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG5cdF9pbmhlcml0cyhtYXBCbG9jaywgX0NvbXBvbmVudCk7XG5cblx0ZnVuY3Rpb24gbWFwQmxvY2socHJvcHMpIHtcblx0XHRfY2xhc3NDYWxsQ2hlY2sodGhpcywgbWFwQmxvY2spO1xuXG5cdFx0dmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKG1hcEJsb2NrLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YobWFwQmxvY2spKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cblx0XHRfdGhpcy5tYXBDb250YWluZXIgPSBSZWFjdC5jcmVhdGVSZWYoKTtcblx0XHRfdGhpcy5tYXBib3hBcGlLZXkgPSB3aW5kb3cuZ3V0ZW5iZXJnX2xlYWZsZXRfbWFwX2Jsb2NrLm1hcGJveF9hcGlfa2V5O1xuXG5cdFx0X3RoaXMuc3RhdGUgPSB7XG5cdFx0XHRpY29uRXJyb3I6IGZhbHNlXG5cdFx0fTtcblxuXHRcdF90aGlzLnNob3dJY29uRXJyb3IuYmluZChfdGhpcyk7XG5cdFx0X3RoaXMuaGlkZUljb25FcnJvci5iaW5kKF90aGlzKTtcblx0XHRyZXR1cm4gX3RoaXM7XG5cdH1cblxuXHQvL1xuXHQvLyBTdGF0ZSBNYW5hZ2VtZW50XG5cdC8vXG5cblxuXHRfY3JlYXRlQ2xhc3MobWFwQmxvY2ssIFt7XG5cdFx0a2V5OiAnc2hvd0ljb25FcnJvcicsXG5cdFx0dmFsdWU6IGZ1bmN0aW9uIHNob3dJY29uRXJyb3IoKSB7XG5cdFx0XHR0aGlzLnNldFN0YXRlKHsgaWNvbkVycm9yOiB0cnVlIH0pO1xuXHRcdH1cblx0fSwge1xuXHRcdGtleTogJ2hpZGVJY29uRXJyb3InLFxuXHRcdHZhbHVlOiBmdW5jdGlvbiBoaWRlSWNvbkVycm9yKCkge1xuXHRcdFx0dGhpcy5zZXRTdGF0ZSh7IGljb25FcnJvcjogZmFsc2UgfSk7XG5cdFx0fVxuXG5cdFx0Ly9cblx0XHQvLyBVcGRhdGUgTWV0aG9kc1xuXHRcdC8vXG5cblx0fSwge1xuXHRcdGtleTogJ3VwZGF0ZUFkZHJlc3MnLFxuXHRcdHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVBZGRyZXNzKHZhbHVlKSB7XG5cdFx0XHR0aGlzLnByb3BzLnNldEF0dHJpYnV0ZXMoe1xuXHRcdFx0XHRhZGRyZXNzOiB2YWx1ZVxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9LCB7XG5cdFx0a2V5OiAndXBkYXRlTWFwTGF0bG5nJyxcblx0XHR2YWx1ZTogZnVuY3Rpb24gdXBkYXRlTWFwTGF0bG5nKHZhbHVlKSB7XG5cdFx0XHR0aGlzLnByb3BzLnNldEF0dHJpYnV0ZXMoe1xuXHRcdFx0XHRtYXBMYXRMbmc6IHZhbHVlXG5cdFx0XHR9KTtcblx0XHR9XG5cdH0sIHtcblx0XHRrZXk6ICd1cGRhdGVNYXJrZXJMYXRsbmcnLFxuXHRcdHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVNYXJrZXJMYXRsbmcodmFsdWUpIHtcblx0XHRcdHRoaXMucHJvcHMuc2V0QXR0cmlidXRlcyh7XG5cdFx0XHRcdG1hcmtlckxhdExuZzogdmFsdWVcblx0XHRcdH0pO1xuXHRcdH1cblx0fSwge1xuXHRcdGtleTogJ3VwZGF0ZUxvY2F0aW9uJyxcblx0XHR2YWx1ZTogZnVuY3Rpb24gdXBkYXRlTG9jYXRpb24obGF0bG5nLCBhZGRyZXNzKSB7XG5cdFx0XHQvLyBVcGRhdGUgbXVsdGlwbGUgYXQgb25jZSBmb3IgZXhwZWN0ZWQgcmVzcG9uc2VzIGZyb20gdGhlXG5cdFx0XHQvLyBmb3J3YXJkIGFuZCBiYWNrIGJ1dHRvbnMgaW4gdGhlIEd1dGVuYmVyZyBVSS5cblx0XHRcdHRoaXMucHJvcHMuc2V0QXR0cmlidXRlcyh7XG5cdFx0XHRcdG1hcmtlckxhdExuZzogbGF0bG5nLFxuXHRcdFx0XHRtYXBMYXRMbmc6IGxhdGxuZyxcblx0XHRcdFx0YWRkcmVzczogYWRkcmVzc1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9LCB7XG5cdFx0a2V5OiAndXBkYXRlSWNvbicsXG5cdFx0dmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZUljb24oaWNvbikge1xuXHRcdFx0dGhpcy5wcm9wcy5zZXRBdHRyaWJ1dGVzKHtcblx0XHRcdFx0Y3VzdG9tSWNvbklEOiBpY29uLmlkLFxuXHRcdFx0XHRjdXN0b21JY29uVVJMOiBpY29uLnVybCxcblx0XHRcdFx0Y3VzdG9tSWNvbldpZHRoOiBpY29uLndpZHRoLFxuXHRcdFx0XHRjdXN0b21JY29uSGVpZ2h0OiBpY29uLmhlaWdodFxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9LCB7XG5cdFx0a2V5OiAncmVtb3ZlSWNvbicsXG5cdFx0dmFsdWU6IGZ1bmN0aW9uIHJlbW92ZUljb24oKSB7XG5cdFx0XHR0aGlzLnByb3BzLnNldEF0dHJpYnV0ZXMoe1xuXHRcdFx0XHRjdXN0b21JY29uSUQ6IG51bGwsXG5cdFx0XHRcdGN1c3RvbUljb25VUkw6IG51bGwsXG5cdFx0XHRcdGN1c3RvbUljb25XaWR0aDogbnVsbCxcblx0XHRcdFx0Y3VzdG9tSWNvbkhlaWdodDogbnVsbFxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9LCB7XG5cdFx0a2V5OiAndmFsaWRhdGVJY29uJyxcblx0XHR2YWx1ZTogZnVuY3Rpb24gdmFsaWRhdGVJY29uKGljb24pIHtcblx0XHRcdGlmIChpY29uLm1pbWUgIT09ICdpbWFnZS9wbmcnIHx8IGljb24uaGVpZ2h0ID4gMTAwIHx8IGljb24ud2lkdGggPiAxMDApIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cblx0XHQvL1xuXHRcdC8vIE1hcCBIZWxwZXIgRnVuY3Rpb25zXG5cdFx0Ly9cblxuXHR9LCB7XG5cdFx0a2V5OiAnY3JlYXRlQ3VzdG9tSWNvbicsXG5cdFx0dmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUN1c3RvbUljb24oaWNvblVybCwgaWNvbldpZHRoLCBpY29uSGVpZ2h0KSB7XG5cdFx0XHQvLyBDZW50ZXIgdGhlIGFuY2hvciBwb2ludCBiYXNlZCB0aGUgb24gdGhlIGljb24gd2lkdGhcblx0XHRcdHZhciBpY29uQW5jaG9yID0gW2ljb25XaWR0aCAvIDIsIGljb25IZWlnaHRdO1xuXG5cdFx0XHRyZXR1cm4gTC5pY29uKHtcblx0XHRcdFx0aWNvblVybDogaWNvblVybCxcblx0XHRcdFx0aWNvbkFuY2hvcjogaWNvbkFuY2hvcixcblx0XHRcdFx0aWNvblNpemU6IFtpY29uV2lkdGgsIGljb25IZWlnaHRdXG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHQvL1xuXHRcdC8vIFJlbmRlclxuXHRcdC8vXG5cblx0fSwge1xuXHRcdGtleTogJ3JlbmRlcicsXG5cdFx0dmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0XHRcdHZhciBfdGhpczIgPSB0aGlzO1xuXG5cdFx0XHR2YXIgX3Byb3BzID0gdGhpcy5wcm9wcyxcblx0XHRcdCAgICBhdHRyaWJ1dGVzID0gX3Byb3BzLmF0dHJpYnV0ZXMsXG5cdFx0XHQgICAgc2V0QXR0cmlidXRlcyA9IF9wcm9wcy5zZXRBdHRyaWJ1dGVzO1xuXG5cblx0XHRcdHZhciBjb2xvcnMgPSBbeyBuYW1lOiAnYmx1ZScsIGNvbG9yOiAnIzY3QjZFMycgfSwgeyBuYW1lOiAnd2hpdGUnLCBjb2xvcjogJyNmZmYnIH0sIHsgbmFtZTogJ2dyZXknLCBjb2xvcjogJyNBNEJBQjcnIH1dO1xuXG5cdFx0XHR2YXIgc3R5bGVzID0ge1xuXHRcdFx0XHRoZWlnaHQ6IGF0dHJpYnV0ZXMuaGVpZ2h0ICsgJ3B4Jyxcblx0XHRcdFx0YmFja2dyb3VuZDogYXR0cmlidXRlcy5tYXBDb250YWluZXJCYWNrZ3JvdW5kXG5cdFx0XHR9O1xuXG5cdFx0XHRyZXR1cm4gd3AuZWxlbWVudC5jcmVhdGVFbGVtZW50KFxuXHRcdFx0XHRGcmFnbWVudCxcblx0XHRcdFx0bnVsbCxcblx0XHRcdFx0d3AuZWxlbWVudC5jcmVhdGVFbGVtZW50KFxuXHRcdFx0XHRcdEluc3BlY3RvckNvbnRyb2xzLFxuXHRcdFx0XHRcdG51bGwsXG5cdFx0XHRcdFx0d3AuZWxlbWVudC5jcmVhdGVFbGVtZW50KFxuXHRcdFx0XHRcdFx0UGFuZWxCb2R5LFxuXHRcdFx0XHRcdFx0eyB0aXRsZTogX18oJ0xlYWZsZXQgTWFwIFNldHRpbmdzJykgfSxcblx0XHRcdFx0XHRcdHdwLmVsZW1lbnQuY3JlYXRlRWxlbWVudChSYW5nZUNvbnRyb2wsIHtcblx0XHRcdFx0XHRcdFx0bGFiZWw6IF9fKCdIZWlnaHQnKSxcblx0XHRcdFx0XHRcdFx0dmFsdWU6IGF0dHJpYnV0ZXMuaGVpZ2h0LFxuXHRcdFx0XHRcdFx0XHRvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UodmFsdWUpIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gc2V0QXR0cmlidXRlcyh7IGhlaWdodDogdmFsdWUgfSk7XG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdG1pbjogMTUwLFxuXHRcdFx0XHRcdFx0XHRtYXg6IDgwMFxuXHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHR3cC5lbGVtZW50LmNyZWF0ZUVsZW1lbnQoUmFuZ2VDb250cm9sLCB7XG5cdFx0XHRcdFx0XHRcdGxhYmVsOiBfXygnRGVmYXVsdCBab29tJyksXG5cdFx0XHRcdFx0XHRcdHZhbHVlOiBhdHRyaWJ1dGVzLnpvb20sXG5cdFx0XHRcdFx0XHRcdG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZSh2YWx1ZSkge1xuXHRcdFx0XHRcdFx0XHRcdGlmICh2YWx1ZSA+IDE4IHx8IHZhbHVlIDwgMikge1xuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdHNldEF0dHJpYnV0ZXMoeyB6b29tOiB2YWx1ZSB9KTtcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0bWluOiAyLFxuXHRcdFx0XHRcdFx0XHRtYXg6IDE4XG5cdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRcdHdwLmVsZW1lbnQuY3JlYXRlRWxlbWVudChcblx0XHRcdFx0XHRcdFx0J3AnLFxuXHRcdFx0XHRcdFx0XHRudWxsLFxuXHRcdFx0XHRcdFx0XHQnTWFwIEJhY2tncm91bmQnXG5cdFx0XHRcdFx0XHQpLFxuXHRcdFx0XHRcdFx0d3AuZWxlbWVudC5jcmVhdGVFbGVtZW50KENvbG9yUGFsZXR0ZSwge1xuXHRcdFx0XHRcdFx0XHRjb2xvcnM6IGNvbG9ycyxcblx0XHRcdFx0XHRcdFx0dmFsdWU6IGF0dHJpYnV0ZXMubWFwQ29udGFpbmVyQmFja2dyb3VuZCxcblx0XHRcdFx0XHRcdFx0b25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKHZhbHVlKSB7XG5cdFx0XHRcdFx0XHRcdFx0c2V0QXR0cmlidXRlcyh7XG5cdFx0XHRcdFx0XHRcdFx0XHRtYXBDb250YWluZXJCYWNrZ3JvdW5kOiB2YWx1ZVxuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRcdHdwLmVsZW1lbnQuY3JlYXRlRWxlbWVudChcblx0XHRcdFx0XHRcdFx0J2gyJyxcblx0XHRcdFx0XHRcdFx0bnVsbCxcblx0XHRcdFx0XHRcdFx0J0N1c3RvbSBJY29uJ1xuXHRcdFx0XHRcdFx0KSxcblx0XHRcdFx0XHRcdHdwLmVsZW1lbnQuY3JlYXRlRWxlbWVudChcblx0XHRcdFx0XHRcdFx0J3AnLFxuXHRcdFx0XHRcdFx0XHRudWxsLFxuXHRcdFx0XHRcdFx0XHQnLnBuZyBmaWxlLCBubyBsYXJnZXIgdGhhbiAxMDBweCBieSAxMDBweCdcblx0XHRcdFx0XHRcdCksXG5cdFx0XHRcdFx0XHR3cC5lbGVtZW50LmNyZWF0ZUVsZW1lbnQoTWVkaWFVcGxvYWQsIHtcblx0XHRcdFx0XHRcdFx0b25TZWxlY3Q6IGZ1bmN0aW9uIG9uU2VsZWN0KGltZykge1xuXHRcdFx0XHRcdFx0XHRcdGlmICghX3RoaXMyLnZhbGlkYXRlSWNvbihpbWcpKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRfdGhpczIuc2hvd0ljb25FcnJvcigpO1xuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdF90aGlzMi51cGRhdGVJY29uKGltZyk7XG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdHR5cGU6ICdpbWFnZScsXG5cdFx0XHRcdFx0XHRcdHZhbHVlOiBhdHRyaWJ1dGVzLmN1c3RvbUljb25JRCxcblx0XHRcdFx0XHRcdFx0cmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoX3JlZikge1xuXHRcdFx0XHRcdFx0XHRcdHZhciBvcGVuID0gX3JlZi5vcGVuO1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiB3cC5lbGVtZW50LmNyZWF0ZUVsZW1lbnQoXG5cdFx0XHRcdFx0XHRcdFx0XHRGcmFnbWVudCxcblx0XHRcdFx0XHRcdFx0XHRcdG51bGwsXG5cdFx0XHRcdFx0XHRcdFx0XHRfdGhpczIuc3RhdGUuaWNvbkVycm9yID8gd3AuZWxlbWVudC5jcmVhdGVFbGVtZW50KFxuXHRcdFx0XHRcdFx0XHRcdFx0XHROb3RpY2UsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjbGFzc05hbWU6ICdnbG0tbm90aWNlJyxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzdGF0dXM6ICdlcnJvcicsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0b25SZW1vdmU6IGZ1bmN0aW9uIG9uUmVtb3ZlKCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIF90aGlzMi5oaWRlSWNvbkVycm9yKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR3cC5lbGVtZW50LmNyZWF0ZUVsZW1lbnQoXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0J3AnLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG51bGwsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0J0ludmFsaWQgSWNvbidcblx0XHRcdFx0XHRcdFx0XHRcdFx0KVxuXHRcdFx0XHRcdFx0XHRcdFx0KSA6ICcnLFxuXHRcdFx0XHRcdFx0XHRcdFx0d3AuZWxlbWVudC5jcmVhdGVFbGVtZW50KFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRCdXR0b24sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRvbkNsaWNrOiBvcGVuLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNsYXNzTmFtZTogJ2NvbXBvbmVudHMtYnV0dG9uIGlzLWJ1dHRvbiBpcy1kZWZhdWx0IGlzLWxhcmdlIGdsbS11cGxvYWQtYnV0dG9uJ1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRhdHRyaWJ1dGVzLmN1c3RvbUljb25JRCA/IHdwLmVsZW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJywge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNyYzogYXR0cmlidXRlcy5jdXN0b21JY29uVVJMLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGFsdDogJ0ljb24nXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0pIDogJ3VwbG9hZCdcblx0XHRcdFx0XHRcdFx0XHRcdCksXG5cdFx0XHRcdFx0XHRcdFx0XHRhdHRyaWJ1dGVzLmN1c3RvbUljb25JRCA/IHdwLmVsZW1lbnQuY3JlYXRlRWxlbWVudChcblx0XHRcdFx0XHRcdFx0XHRcdFx0QnV0dG9uLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0b25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdF90aGlzMi5yZW1vdmVJY29uKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aXRsZTogJ3JlbW92ZSBpY29uJ1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR3cC5lbGVtZW50LmNyZWF0ZUVsZW1lbnQoRGFzaGljb24sIHsgaWNvbjogJ25vJyB9KVxuXHRcdFx0XHRcdFx0XHRcdFx0KSA6ICcnXG5cdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQpXG5cdFx0XHRcdCksXG5cdFx0XHRcdHdwLmVsZW1lbnQuY3JlYXRlRWxlbWVudChcblx0XHRcdFx0XHQnZGl2Jyxcblx0XHRcdFx0XHRudWxsLFxuXHRcdFx0XHRcdHdwLmVsZW1lbnQuY3JlYXRlRWxlbWVudChcblx0XHRcdFx0XHRcdCdwJyxcblx0XHRcdFx0XHRcdG51bGwsXG5cdFx0XHRcdFx0XHR0aGlzLnByb3BzLmF0dHJpYnV0ZXMuYWRkcmVzc1xuXHRcdFx0XHRcdCksXG5cdFx0XHRcdFx0d3AuZWxlbWVudC5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IHN0eWxlOiBzdHlsZXMsIHJlZjogdGhpcy5tYXBDb250YWluZXIgfSlcblx0XHRcdFx0KVxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHQvL1xuXHRcdC8vIERpZCBNb3VudFxuXHRcdC8vXG5cblx0fSwge1xuXHRcdGtleTogJ2NvbXBvbmVudERpZE1vdW50Jyxcblx0XHR2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG5cdFx0XHR2YXIgX3RoaXMzID0gdGhpcztcblxuXHRcdFx0dGhpcy5tYXAgPSBMLm1hcCh0aGlzLm1hcENvbnRhaW5lci5jdXJyZW50KS5zZXRWaWV3KHRoaXMucHJvcHMuYXR0cmlidXRlcy5tYXBMYXRMbmcsIHRoaXMucHJvcHMuYXR0cmlidXRlcy56b29tKTtcblxuXHRcdFx0dmFyIG1hcmtlck9wdGlvbnMgPSB7fTtcblxuXHRcdFx0Ly8gU2V0IHVwIGN1c3RvbSBtYXJrZXIgaWNvblxuXHRcdFx0aWYgKHRoaXMucHJvcHMuYXR0cmlidXRlcy5jdXN0b21JY29uVVJMKSB7XG5cdFx0XHRcdG1hcmtlck9wdGlvbnMuaWNvbiA9IHRoaXMuY3JlYXRlQ3VzdG9tSWNvbih0aGlzLnByb3BzLmF0dHJpYnV0ZXMuY3VzdG9tSWNvblVSTCwgdGhpcy5wcm9wcy5hdHRyaWJ1dGVzLmN1c3RvbUljb25XaWR0aCwgdGhpcy5wcm9wcy5hdHRyaWJ1dGVzLmN1c3RvbUljb25IZWlnaHQpO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLm1hcmtlciA9IEwubWFya2VyKHRoaXMucHJvcHMuYXR0cmlidXRlcy5tYXJrZXJMYXRMbmcsIG1hcmtlck9wdGlvbnMpLmFkZFRvKHRoaXMubWFwKTtcblxuXHRcdFx0Ly8gU2V0IFRpbGVzXG5cdFx0XHRMLnRpbGVMYXllcignaHR0cHM6Ly9hcGkudGlsZXMubWFwYm94LmNvbS92NC97aWR9L3t6fS97eH0ve3l9LnBuZz9hY2Nlc3NfdG9rZW49e2FjY2Vzc1Rva2VufScsIHtcblx0XHRcdFx0YXR0cmlidXRpb246ICdNYXAgZGF0YSAmY29weTsgPGEgaHJlZj1cImh0dHBzOi8vd3d3Lm9wZW5zdHJlZXRtYXAub3JnL1wiPk9wZW5TdHJlZXRNYXA8L2E+IGNvbnRyaWJ1dG9ycywgPGEgaHJlZj1cImh0dHBzOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1zYS8yLjAvXCI+Q0MtQlktU0E8L2E+LCBJbWFnZXJ5IMKpIDxhIGhyZWY9XCJodHRwczovL3d3dy5tYXBib3guY29tL1wiPk1hcGJveDwvYT4nLFxuXHRcdFx0XHRtYXhab29tOiAxOCxcblx0XHRcdFx0bWluWm9vbTogMixcblx0XHRcdFx0aWQ6ICdtYXBib3guc3RyZWV0cycsXG5cdFx0XHRcdGFjY2Vzc1Rva2VuOiB0aGlzLm1hcGJveEFwaUtleVxuXHRcdFx0fSkuYWRkVG8odGhpcy5tYXApO1xuXG5cdFx0XHQvLyBHZW9jb2RlciBzZWFyY2ggYm94XG5cdFx0XHRMLkNvbnRyb2wuZ2VvY29kZXIoe1xuXHRcdFx0XHRkZWZhdWx0TWFya0dlb2NvZGU6IGZhbHNlXG5cdFx0XHR9KS5vbignbWFya2dlb2NvZGUnLCBmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHR2YXIgbGF0bG5nID0gW2UuZ2VvY29kZS5jZW50ZXIubGF0LCBlLmdlb2NvZGUuY2VudGVyLmxuZ107XG5cblx0XHRcdFx0Ly8gU2V0IG5ldyB2aWV3IGZvciB1c2VyXG5cdFx0XHRcdF90aGlzMy5tYXAuZmx5VG8obGF0bG5nKTtcblxuXHRcdFx0XHQvLyBTYXZlIGxvY2F0aW9uXG5cdFx0XHRcdF90aGlzMy51cGRhdGVMb2NhdGlvbihsYXRsbmcsIGUuZ2VvY29kZS5uYW1lKTtcblx0XHRcdH0pLmFkZFRvKHRoaXMubWFwKTtcblxuXHRcdFx0Ly8gQ2xpY2sgdG8gc2V0IGxvY2F0aW9uXG5cdFx0XHR0aGlzLm1hcC5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHR2YXIgbGF0bG5nID0gW2UubGF0bG5nLmxhdCwgZS5sYXRsbmcubG5nXTtcblxuXHRcdFx0XHQvLyBHZXQgYWRkcmVzcyBuYW1lIGZyb20gbGF0bG5nXG5cdFx0XHRcdEwuQ29udHJvbC5HZW9jb2Rlci5ub21pbmF0aW0oKS5yZXZlcnNlKGUubGF0bG5nLCAxOCwgZnVuY3Rpb24gKHJlc3VsdHMpIHtcblx0XHRcdFx0XHQvLyBVcGRhdGUgdGhlIGxvY2F0aW9uXG5cdFx0XHRcdFx0aWYgKCFyZXN1bHRzLmhhc093blByb3BlcnR5KDApKSB7XG5cdFx0XHRcdFx0XHRfdGhpczMudXBkYXRlTG9jYXRpb24obGF0bG5nLCAndW5rbm93bicpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRfdGhpczMudXBkYXRlTG9jYXRpb24obGF0bG5nLCByZXN1bHRzWzBdLm5hbWUpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHQvL1xuXHRcdC8vIERpZCBVcGRhdGVcblx0XHQvL1xuXG5cdH0sIHtcblx0XHRrZXk6ICdjb21wb25lbnREaWRVcGRhdGUnLFxuXHRcdHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzKSB7XG5cdFx0XHQvLyBNYXJrZXIgd2lsbCB1cGRhdGUgd2hlbiB0aGUgYXR0cmlidXRlIGlzIHVwZGF0ZWRcblx0XHRcdHRoaXMubWFya2VyLnNldExhdExuZyh0aGlzLnByb3BzLmF0dHJpYnV0ZXMubWFya2VyTGF0TG5nKTtcblxuXHRcdFx0Ly8gUHJldmlldyB6b29tIGxldmVsIGlmIGNoYW5nZWRcblx0XHRcdGlmIChwcmV2UHJvcHMuYXR0cmlidXRlcy56b29tICE9PSB0aGlzLnByb3BzLmF0dHJpYnV0ZXMuem9vbSkge1xuXHRcdFx0XHR0aGlzLm1hcC5zZXRab29tKHRoaXMucHJvcHMuYXR0cmlidXRlcy56b29tKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gVXBkYXRlIEljb25cblx0XHRcdGlmIChwcmV2UHJvcHMuYXR0cmlidXRlcy5jdXN0b21JY29uSUQgIT09IHRoaXMucHJvcHMuYXR0cmlidXRlcy5jdXN0b21JY29uSUQpIHtcblx0XHRcdFx0dmFyIG5ld0ljb24gPSB2b2lkIDA7XG5cblx0XHRcdFx0Ly8gR2V0IHRoZSBuZXcgaWNvbiBpZiBhdmFpbGFibGVcblx0XHRcdFx0Ly8gT3RoZXJ3aXNlIGdldCB0aGUgb3JpZ2luYWwgaWNvblxuXHRcdFx0XHRpZiAodGhpcy5wcm9wcy5hdHRyaWJ1dGVzLmN1c3RvbUljb25JRCkge1xuXHRcdFx0XHRcdG5ld0ljb24gPSB0aGlzLmNyZWF0ZUN1c3RvbUljb24odGhpcy5wcm9wcy5hdHRyaWJ1dGVzLmN1c3RvbUljb25VUkwsIHRoaXMucHJvcHMuYXR0cmlidXRlcy5jdXN0b21JY29uV2lkdGgsIHRoaXMucHJvcHMuYXR0cmlidXRlcy5jdXN0b21JY29uSGVpZ2h0KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR2YXIgZGVmYXVsdEljb24gPSBPYmplY3QuYXNzaWduKHt9LCBMLkljb24uRGVmYXVsdC5wcm90b3R5cGUub3B0aW9ucyk7XG5cdFx0XHRcdFx0dmFyIG1hcEltYWdlcyA9IHBsdWdpblVybCArICcvdmVuZG9yL2ltYWdlcy8nO1xuXG5cdFx0XHRcdFx0ZGVmYXVsdEljb24uaWNvblVybCA9IG1hcEltYWdlcyArIGRlZmF1bHRJY29uLmljb25Vcmw7XG5cdFx0XHRcdFx0ZGVmYXVsdEljb24uaWNvblJldGluYVVybCA9IG1hcEltYWdlcyArIGRlZmF1bHRJY29uLmljb25SZXRpbmFVcmw7XG5cdFx0XHRcdFx0ZGVmYXVsdEljb24uc2hhZG93VXJsID0gbWFwSW1hZ2VzICsgZGVmYXVsdEljb24uc2hhZG93VXJsO1xuXG5cdFx0XHRcdFx0bmV3SWNvbiA9IEwuaWNvbihkZWZhdWx0SWNvbik7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR0aGlzLm1hcmtlci5zZXRJY29uKG5ld0ljb24pO1xuXHRcdFx0fVxuXHRcdH1cblx0fV0pO1xuXG5cdHJldHVybiBtYXBCbG9jaztcbn0oQ29tcG9uZW50KTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ibG9jay9ibG9jay5qc1xuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///1\n");

/***/ }),
/* 2 */
/*!******************************!*\
  !*** ./src/block/style.scss ***!
  \******************************/
/*! dynamic exports provided */
/***/ (function(module, exports) {

eval("// removed by extract-text-webpack-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9ibG9jay9zdHlsZS5zY3NzP2ViNmUiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ibG9jay9zdHlsZS5zY3NzXG4vLyBtb2R1bGUgaWQgPSAyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2\n");

/***/ }),
/* 3 */
/*!*******************************!*\
  !*** ./src/block/editor.scss ***!
  \*******************************/
/*! dynamic exports provided */
/***/ (function(module, exports) {

eval("// removed by extract-text-webpack-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9ibG9jay9lZGl0b3Iuc2Nzcz8xMWI1Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvYmxvY2svZWRpdG9yLnNjc3Ncbi8vIG1vZHVsZSBpZCA9IDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///3\n");

/***/ }),
/* 4 */
/*!*************************************************************************!*\
  !*** ./node_modules/leaflet-control-geocoder/dist/Control.Geocoder.css ***!
  \*************************************************************************/
/*! dynamic exports provided */
/***/ (function(module, exports) {

eval("// removed by extract-text-webpack-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9sZWFmbGV0LWNvbnRyb2wtZ2VvY29kZXIvZGlzdC9Db250cm9sLkdlb2NvZGVyLmNzcz8xZGJiIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvbGVhZmxldC1jb250cm9sLWdlb2NvZGVyL2Rpc3QvQ29udHJvbC5HZW9jb2Rlci5jc3Ncbi8vIG1vZHVsZSBpZCA9IDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///4\n");

/***/ }),
/* 5 */
/*!************************************************************************!*\
  !*** ./node_modules/leaflet-control-geocoder/dist/images/geocoder.png ***!
  \************************************************************************/
/*! dynamic exports provided */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__.p + \"images/geocoder.png\";//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9sZWFmbGV0LWNvbnRyb2wtZ2VvY29kZXIvZGlzdC9pbWFnZXMvZ2VvY29kZXIucG5nPzdhMmIiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiaW1hZ2VzL2dlb2NvZGVyLnBuZ1wiO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2xlYWZsZXQtY29udHJvbC1nZW9jb2Rlci9kaXN0L2ltYWdlcy9nZW9jb2Rlci5wbmdcbi8vIG1vZHVsZSBpZCA9IDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///5\n");

/***/ }),
/* 6 */
/*!************************************************************************!*\
  !*** ./node_modules/leaflet-control-geocoder/dist/images/throbber.gif ***!
  \************************************************************************/
/*! dynamic exports provided */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__.p + \"images/throbber.gif\";//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9sZWFmbGV0LWNvbnRyb2wtZ2VvY29kZXIvZGlzdC9pbWFnZXMvdGhyb2JiZXIuZ2lmPzNmZTEiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiaW1hZ2VzL3Rocm9iYmVyLmdpZlwiO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2xlYWZsZXQtY29udHJvbC1nZW9jb2Rlci9kaXN0L2ltYWdlcy90aHJvYmJlci5naWZcbi8vIG1vZHVsZSBpZCA9IDZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///6\n");

/***/ }),
/* 7 */
/*!************************************************************************!*\
  !*** ./node_modules/leaflet-control-geocoder/dist/Control.Geocoder.js ***!
  \************************************************************************/
/*! dynamic exports provided */
/***/ (function(module, exports) {

eval("this.L = this.L || {};\nthis.L.Control = this.L.Control || {};\nthis.L.Control.Geocoder = (function (L) {\n'use strict';\n\nL = L && L.hasOwnProperty('default') ? L['default'] : L;\n\nvar lastCallbackId = 0;\n\n// Adapted from handlebars.js\n// https://github.com/wycats/handlebars.js/\nvar badChars = /[&<>\"'`]/g;\nvar possible = /[&<>\"'`]/;\nvar escape = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#x27;',\n  '`': '&#x60;'\n};\n\nfunction escapeChar(chr) {\n  return escape[chr];\n}\n\nfunction htmlEscape(string) {\n  if (string == null) {\n    return '';\n  } else if (!string) {\n    return string + '';\n  }\n\n  // Force a string conversion as this will be done by the append regardless and\n  // the regex test will do this transparently behind the scenes, causing issues if\n  // an object's to string has escaped characters in it.\n  string = '' + string;\n\n  if (!possible.test(string)) {\n    return string;\n  }\n  return string.replace(badChars, escapeChar);\n}\n\nfunction jsonp(url, params, callback, context, jsonpParam) {\n  var callbackId = '_l_geocoder_' + lastCallbackId++;\n  params[jsonpParam || 'callback'] = callbackId;\n  window[callbackId] = L.Util.bind(callback, context);\n  var script = document.createElement('script');\n  script.type = 'text/javascript';\n  script.src = url + L.Util.getParamString(params);\n  script.id = callbackId;\n  document.getElementsByTagName('head')[0].appendChild(script);\n}\n\nfunction getJSON(url, params, callback) {\n  var xmlHttp = new XMLHttpRequest();\n  xmlHttp.onreadystatechange = function() {\n    if (xmlHttp.readyState !== 4) {\n      return;\n    }\n    if (xmlHttp.status !== 200 && xmlHttp.status !== 304) {\n      callback('');\n      return;\n    }\n    callback(JSON.parse(xmlHttp.response));\n  };\n  xmlHttp.open('GET', url + L.Util.getParamString(params), true);\n  xmlHttp.setRequestHeader('Accept', 'application/json');\n  xmlHttp.send(null);\n}\n\nfunction template(str, data) {\n  return str.replace(/\\{ *([\\w_]+) *\\}/g, function(str, key) {\n    var value = data[key];\n    if (value === undefined) {\n      value = '';\n    } else if (typeof value === 'function') {\n      value = value(data);\n    }\n    return htmlEscape(value);\n  });\n}\n\nvar Nominatim = {\n  class: L.Class.extend({\n    options: {\n      serviceUrl: 'https://nominatim.openstreetmap.org/',\n      geocodingQueryParams: {},\n      reverseQueryParams: {},\n      htmlTemplate: function(r) {\n        var a = r.address,\n          parts = [];\n        if (a.road || a.building) {\n          parts.push('{building} {road} {house_number}');\n        }\n\n        if (a.city || a.town || a.village || a.hamlet) {\n          parts.push(\n            '<span class=\"' +\n              (parts.length > 0 ? 'leaflet-control-geocoder-address-detail' : '') +\n              '\">{postcode} {city} {town} {village} {hamlet}</span>'\n          );\n        }\n\n        if (a.state || a.country) {\n          parts.push(\n            '<span class=\"' +\n              (parts.length > 0 ? 'leaflet-control-geocoder-address-context' : '') +\n              '\">{state} {country}</span>'\n          );\n        }\n\n        return template(parts.join('<br/>'), a, true);\n      }\n    },\n\n    initialize: function(options) {\n      L.Util.setOptions(this, options);\n    },\n\n    geocode: function(query, cb, context) {\n      getJSON(\n        this.options.serviceUrl + 'search',\n        L.extend(\n          {\n            q: query,\n            limit: 5,\n            format: 'json',\n            addressdetails: 1\n          },\n          this.options.geocodingQueryParams\n        ),\n        L.bind(function(data) {\n          var results = [];\n          for (var i = data.length - 1; i >= 0; i--) {\n            var bbox = data[i].boundingbox;\n            for (var j = 0; j < 4; j++) bbox[j] = parseFloat(bbox[j]);\n            results[i] = {\n              icon: data[i].icon,\n              name: data[i].display_name,\n              html: this.options.htmlTemplate ? this.options.htmlTemplate(data[i]) : undefined,\n              bbox: L.latLngBounds([bbox[0], bbox[2]], [bbox[1], bbox[3]]),\n              center: L.latLng(data[i].lat, data[i].lon),\n              properties: data[i]\n            };\n          }\n          cb.call(context, results);\n        }, this)\n      );\n    },\n\n    reverse: function(location, scale, cb, context) {\n      getJSON(\n        this.options.serviceUrl + 'reverse',\n        L.extend(\n          {\n            lat: location.lat,\n            lon: location.lng,\n            zoom: Math.round(Math.log(scale / 256) / Math.log(2)),\n            addressdetails: 1,\n            format: 'json'\n          },\n          this.options.reverseQueryParams\n        ),\n        L.bind(function(data) {\n          var result = [],\n            loc;\n\n          if (data && data.lat && data.lon) {\n            loc = L.latLng(data.lat, data.lon);\n            result.push({\n              name: data.display_name,\n              html: this.options.htmlTemplate ? this.options.htmlTemplate(data) : undefined,\n              center: loc,\n              bounds: L.latLngBounds(loc, loc),\n              properties: data\n            });\n          }\n\n          cb.call(context, result);\n        }, this)\n      );\n    }\n  }),\n\n  factory: function(options) {\n    return new L.Control.Geocoder.Nominatim(options);\n  }\n};\n\nvar Control = {\n  class: L.Control.extend({\n    options: {\n      showResultIcons: false,\n      collapsed: true,\n      expand: 'touch', // options: touch, click, anythingelse\n      position: 'topright',\n      placeholder: 'Search...',\n      errorMessage: 'Nothing found.',\n      suggestMinLength: 3,\n      suggestTimeout: 250,\n      defaultMarkGeocode: true\n    },\n\n    includes: L.Evented.prototype || L.Mixin.Events,\n\n    initialize: function(options) {\n      L.Util.setOptions(this, options);\n      if (!this.options.geocoder) {\n        this.options.geocoder = new Nominatim.class();\n      }\n\n      this._requestCount = 0;\n    },\n\n    onAdd: function(map) {\n      var className = 'leaflet-control-geocoder',\n        container = L.DomUtil.create('div', className + ' leaflet-bar'),\n        icon = L.DomUtil.create('button', className + '-icon', container),\n        form = (this._form = L.DomUtil.create('div', className + '-form', container)),\n        input;\n\n      this._map = map;\n      this._container = container;\n\n      icon.innerHTML = '&nbsp;';\n      icon.type = 'button';\n\n      input = this._input = L.DomUtil.create('input', '', form);\n      input.type = 'text';\n      input.placeholder = this.options.placeholder;\n\n      this._errorElement = L.DomUtil.create('div', className + '-form-no-error', container);\n      this._errorElement.innerHTML = this.options.errorMessage;\n\n      this._alts = L.DomUtil.create(\n        'ul',\n        className + '-alternatives leaflet-control-geocoder-alternatives-minimized',\n        container\n      );\n      L.DomEvent.disableClickPropagation(this._alts);\n\n      L.DomEvent.addListener(input, 'keydown', this._keydown, this);\n      if (this.options.geocoder.suggest) {\n        L.DomEvent.addListener(input, 'input', this._change, this);\n      }\n      L.DomEvent.addListener(\n        input,\n        'blur',\n        function() {\n          if (this.options.collapsed && !this._preventBlurCollapse) {\n            this._collapse();\n          }\n          this._preventBlurCollapse = false;\n        },\n        this\n      );\n\n      if (this.options.collapsed) {\n        if (this.options.expand === 'click') {\n          L.DomEvent.addListener(\n            container,\n            'click',\n            function(e) {\n              if (e.button === 0 && e.detail !== 2) {\n                this._toggle();\n              }\n            },\n            this\n          );\n        } else if (L.Browser.touch && this.options.expand === 'touch') {\n          L.DomEvent.addListener(\n            container,\n            'touchstart mousedown',\n            function(e) {\n              this._toggle();\n              e.preventDefault(); // mobile: clicking focuses the icon, so UI expands and immediately collapses\n              e.stopPropagation();\n            },\n            this\n          );\n        } else {\n          L.DomEvent.addListener(container, 'mouseover', this._expand, this);\n          L.DomEvent.addListener(container, 'mouseout', this._collapse, this);\n          this._map.on('movestart', this._collapse, this);\n        }\n      } else {\n        this._expand();\n        if (L.Browser.touch) {\n          L.DomEvent.addListener(\n            container,\n            'touchstart',\n            function() {\n              this._geocode();\n            },\n            this\n          );\n        } else {\n          L.DomEvent.addListener(\n            container,\n            'click',\n            function() {\n              this._geocode();\n            },\n            this\n          );\n        }\n      }\n\n      if (this.options.defaultMarkGeocode) {\n        this.on('markgeocode', this.markGeocode, this);\n      }\n\n      this.on(\n        'startgeocode',\n        function() {\n          L.DomUtil.addClass(this._container, 'leaflet-control-geocoder-throbber');\n        },\n        this\n      );\n      this.on(\n        'finishgeocode',\n        function() {\n          L.DomUtil.removeClass(this._container, 'leaflet-control-geocoder-throbber');\n        },\n        this\n      );\n\n      L.DomEvent.disableClickPropagation(container);\n\n      return container;\n    },\n\n    _geocodeResult: function(results, suggest) {\n      if (!suggest && results.length === 1) {\n        this._geocodeResultSelected(results[0]);\n      } else if (results.length > 0) {\n        this._alts.innerHTML = '';\n        this._results = results;\n        L.DomUtil.removeClass(this._alts, 'leaflet-control-geocoder-alternatives-minimized');\n        for (var i = 0; i < results.length; i++) {\n          this._alts.appendChild(this._createAlt(results[i], i));\n        }\n      } else {\n        L.DomUtil.addClass(this._errorElement, 'leaflet-control-geocoder-error');\n      }\n    },\n\n    markGeocode: function(result) {\n      result = result.geocode || result;\n\n      this._map.fitBounds(result.bbox);\n\n      if (this._geocodeMarker) {\n        this._map.removeLayer(this._geocodeMarker);\n      }\n\n      this._geocodeMarker = new L.Marker(result.center)\n        .bindPopup(result.html || result.name)\n        .addTo(this._map)\n        .openPopup();\n\n      return this;\n    },\n\n    _geocode: function(suggest) {\n      var requestCount = ++this._requestCount,\n        mode = suggest ? 'suggest' : 'geocode',\n        eventData = { input: this._input.value };\n\n      this._lastGeocode = this._input.value;\n      if (!suggest) {\n        this._clearResults();\n      }\n\n      this.fire('start' + mode, eventData);\n      this.options.geocoder[mode](\n        this._input.value,\n        function(results) {\n          if (requestCount === this._requestCount) {\n            eventData.results = results;\n            this.fire('finish' + mode, eventData);\n            this._geocodeResult(results, suggest);\n          }\n        },\n        this\n      );\n    },\n\n    _geocodeResultSelected: function(result) {\n      this.fire('markgeocode', { geocode: result });\n    },\n\n    _toggle: function() {\n      if (L.DomUtil.hasClass(this._container, 'leaflet-control-geocoder-expanded')) {\n        this._collapse();\n      } else {\n        this._expand();\n      }\n    },\n\n    _expand: function() {\n      L.DomUtil.addClass(this._container, 'leaflet-control-geocoder-expanded');\n      this._input.select();\n      this.fire('expand');\n    },\n\n    _collapse: function() {\n      L.DomUtil.removeClass(this._container, 'leaflet-control-geocoder-expanded');\n      L.DomUtil.addClass(this._alts, 'leaflet-control-geocoder-alternatives-minimized');\n      L.DomUtil.removeClass(this._errorElement, 'leaflet-control-geocoder-error');\n      this._input.blur(); // mobile: keyboard shouldn't stay expanded\n      this.fire('collapse');\n    },\n\n    _clearResults: function() {\n      L.DomUtil.addClass(this._alts, 'leaflet-control-geocoder-alternatives-minimized');\n      this._selection = null;\n      L.DomUtil.removeClass(this._errorElement, 'leaflet-control-geocoder-error');\n    },\n\n    _createAlt: function(result, index) {\n      var li = L.DomUtil.create('li', ''),\n        a = L.DomUtil.create('a', '', li),\n        icon = this.options.showResultIcons && result.icon ? L.DomUtil.create('img', '', a) : null,\n        text = result.html ? undefined : document.createTextNode(result.name),\n        mouseDownHandler = function mouseDownHandler(e) {\n          // In some browsers, a click will fire on the map if the control is\n          // collapsed directly after mousedown. To work around this, we\n          // wait until the click is completed, and _then_ collapse the\n          // control. Messy, but this is the workaround I could come up with\n          // for #142.\n          this._preventBlurCollapse = true;\n          L.DomEvent.stop(e);\n          this._geocodeResultSelected(result);\n          L.DomEvent.on(\n            li,\n            'click',\n            function() {\n              if (this.options.collapsed) {\n                this._collapse();\n              } else {\n                this._clearResults();\n              }\n            },\n            this\n          );\n        };\n\n      if (icon) {\n        icon.src = result.icon;\n      }\n\n      li.setAttribute('data-result-index', index);\n\n      if (result.html) {\n        a.innerHTML = a.innerHTML + result.html;\n      } else {\n        a.appendChild(text);\n      }\n\n      // Use mousedown and not click, since click will fire _after_ blur,\n      // causing the control to have collapsed and removed the items\n      // before the click can fire.\n      L.DomEvent.addListener(li, 'mousedown touchstart', mouseDownHandler, this);\n\n      return li;\n    },\n\n    _keydown: function(e) {\n      var _this = this,\n        select = function select(dir) {\n          if (_this._selection) {\n            L.DomUtil.removeClass(_this._selection, 'leaflet-control-geocoder-selected');\n            _this._selection = _this._selection[dir > 0 ? 'nextSibling' : 'previousSibling'];\n          }\n          if (!_this._selection) {\n            _this._selection = _this._alts[dir > 0 ? 'firstChild' : 'lastChild'];\n          }\n\n          if (_this._selection) {\n            L.DomUtil.addClass(_this._selection, 'leaflet-control-geocoder-selected');\n          }\n        };\n\n      switch (e.keyCode) {\n        // Escape\n        case 27:\n          if (this.options.collapsed) {\n            this._collapse();\n          }\n          break;\n        // Up\n        case 38:\n          select(-1);\n          break;\n        // Up\n        case 40:\n          select(1);\n          break;\n        // Enter\n        case 13:\n          if (this._selection) {\n            var index = parseInt(this._selection.getAttribute('data-result-index'), 10);\n            this._geocodeResultSelected(this._results[index]);\n            this._clearResults();\n          } else {\n            this._geocode();\n          }\n          break;\n      }\n    },\n    _change: function() {\n      var v = this._input.value;\n      if (v !== this._lastGeocode) {\n        clearTimeout(this._suggestTimeout);\n        if (v.length >= this.options.suggestMinLength) {\n          this._suggestTimeout = setTimeout(\n            L.bind(function() {\n              this._geocode(true);\n            }, this),\n            this.options.suggestTimeout\n          );\n        } else {\n          this._clearResults();\n        }\n      }\n    }\n  }),\n  factory: function(options) {\n    return new L.Control.Geocoder(options);\n  }\n};\n\nvar Bing = {\n  class: L.Class.extend({\n    initialize: function(key) {\n      this.key = key;\n    },\n\n    geocode: function(query, cb, context) {\n      jsonp(\n        'https://dev.virtualearth.net/REST/v1/Locations',\n        {\n          query: query,\n          key: this.key\n        },\n        function(data) {\n          var results = [];\n          if (data.resourceSets.length > 0) {\n            for (var i = data.resourceSets[0].resources.length - 1; i >= 0; i--) {\n              var resource = data.resourceSets[0].resources[i],\n                bbox = resource.bbox;\n              results[i] = {\n                name: resource.name,\n                bbox: L.latLngBounds([bbox[0], bbox[1]], [bbox[2], bbox[3]]),\n                center: L.latLng(resource.point.coordinates)\n              };\n            }\n          }\n          cb.call(context, results);\n        },\n        this,\n        'jsonp'\n      );\n    },\n\n    reverse: function(location, scale, cb, context) {\n      jsonp(\n        '//dev.virtualearth.net/REST/v1/Locations/' + location.lat + ',' + location.lng,\n        {\n          key: this.key\n        },\n        function(data) {\n          var results = [];\n          for (var i = data.resourceSets[0].resources.length - 1; i >= 0; i--) {\n            var resource = data.resourceSets[0].resources[i],\n              bbox = resource.bbox;\n            results[i] = {\n              name: resource.name,\n              bbox: L.latLngBounds([bbox[0], bbox[1]], [bbox[2], bbox[3]]),\n              center: L.latLng(resource.point.coordinates)\n            };\n          }\n          cb.call(context, results);\n        },\n        this,\n        'jsonp'\n      );\n    }\n  }),\n\n  factory: function(key) {\n    return new L.Control.Geocoder.Bing(key);\n  }\n};\n\nvar MapQuest = {\n  class: L.Class.extend({\n    options: {\n      serviceUrl: 'https://www.mapquestapi.com/geocoding/v1'\n    },\n\n    initialize: function(key, options) {\n      // MapQuest seems to provide URI encoded API keys,\n      // so to avoid encoding them twice, we decode them here\n      this._key = decodeURIComponent(key);\n\n      L.Util.setOptions(this, options);\n    },\n\n    _formatName: function() {\n      var r = [],\n        i;\n      for (i = 0; i < arguments.length; i++) {\n        if (arguments[i]) {\n          r.push(arguments[i]);\n        }\n      }\n\n      return r.join(', ');\n    },\n\n    geocode: function(query, cb, context) {\n      getJSON(\n        this.options.serviceUrl + '/address',\n        {\n          key: this._key,\n          location: query,\n          limit: 5,\n          outFormat: 'json'\n        },\n        L.bind(function(data) {\n          var results = [],\n            loc,\n            latLng;\n          if (data.results && data.results[0].locations) {\n            for (var i = data.results[0].locations.length - 1; i >= 0; i--) {\n              loc = data.results[0].locations[i];\n              latLng = L.latLng(loc.latLng);\n              results[i] = {\n                name: this._formatName(loc.street, loc.adminArea4, loc.adminArea3, loc.adminArea1),\n                bbox: L.latLngBounds(latLng, latLng),\n                center: latLng\n              };\n            }\n          }\n\n          cb.call(context, results);\n        }, this)\n      );\n    },\n\n    reverse: function(location, scale, cb, context) {\n      getJSON(\n        this.options.serviceUrl + '/reverse',\n        {\n          key: this._key,\n          location: location.lat + ',' + location.lng,\n          outputFormat: 'json'\n        },\n        L.bind(function(data) {\n          var results = [],\n            loc,\n            latLng;\n          if (data.results && data.results[0].locations) {\n            for (var i = data.results[0].locations.length - 1; i >= 0; i--) {\n              loc = data.results[0].locations[i];\n              latLng = L.latLng(loc.latLng);\n              results[i] = {\n                name: this._formatName(loc.street, loc.adminArea4, loc.adminArea3, loc.adminArea1),\n                bbox: L.latLngBounds(latLng, latLng),\n                center: latLng\n              };\n            }\n          }\n\n          cb.call(context, results);\n        }, this)\n      );\n    }\n  }),\n\n  factory: function(key, options) {\n    return new L.Control.Geocoder.MapQuest(key, options);\n  }\n};\n\nvar Mapbox = {\n  class: L.Class.extend({\n    options: {\n      serviceUrl: 'https://api.tiles.mapbox.com/v4/geocode/mapbox.places-v1/',\n      geocodingQueryParams: {},\n      reverseQueryParams: {}\n    },\n\n    initialize: function(accessToken, options) {\n      L.setOptions(this, options);\n      this.options.geocodingQueryParams.access_token = accessToken;\n      this.options.reverseQueryParams.access_token = accessToken;\n    },\n\n    geocode: function(query, cb, context) {\n      var params = this.options.geocodingQueryParams;\n      if (\n        typeof params.proximity !== 'undefined' &&\n        params.proximity.hasOwnProperty('lat') &&\n        params.proximity.hasOwnProperty('lng')\n      ) {\n        params.proximity = params.proximity.lng + ',' + params.proximity.lat;\n      }\n      getJSON(this.options.serviceUrl + encodeURIComponent(query) + '.json', params, function(\n        data\n      ) {\n        var results = [],\n          loc,\n          latLng,\n          latLngBounds;\n        if (data.features && data.features.length) {\n          for (var i = 0; i <= data.features.length - 1; i++) {\n            loc = data.features[i];\n            latLng = L.latLng(loc.center.reverse());\n            if (loc.hasOwnProperty('bbox')) {\n              latLngBounds = L.latLngBounds(\n                L.latLng(loc.bbox.slice(0, 2).reverse()),\n                L.latLng(loc.bbox.slice(2, 4).reverse())\n              );\n            } else {\n              latLngBounds = L.latLngBounds(latLng, latLng);\n            }\n            results[i] = {\n              name: loc.place_name,\n              bbox: latLngBounds,\n              center: latLng\n            };\n          }\n        }\n\n        cb.call(context, results);\n      });\n    },\n\n    suggest: function(query, cb, context) {\n      return this.geocode(query, cb, context);\n    },\n\n    reverse: function(location, scale, cb, context) {\n      getJSON(\n        this.options.serviceUrl +\n          encodeURIComponent(location.lng) +\n          ',' +\n          encodeURIComponent(location.lat) +\n          '.json',\n        this.options.reverseQueryParams,\n        function(data) {\n          var results = [],\n            loc,\n            latLng,\n            latLngBounds;\n          if (data.features && data.features.length) {\n            for (var i = 0; i <= data.features.length - 1; i++) {\n              loc = data.features[i];\n              latLng = L.latLng(loc.center.reverse());\n              if (loc.hasOwnProperty('bbox')) {\n                latLngBounds = L.latLngBounds(\n                  L.latLng(loc.bbox.slice(0, 2).reverse()),\n                  L.latLng(loc.bbox.slice(2, 4).reverse())\n                );\n              } else {\n                latLngBounds = L.latLngBounds(latLng, latLng);\n              }\n              results[i] = {\n                name: loc.place_name,\n                bbox: latLngBounds,\n                center: latLng\n              };\n            }\n          }\n\n          cb.call(context, results);\n        }\n      );\n    }\n  }),\n\n  factory: function(accessToken, options) {\n    return new L.Control.Geocoder.Mapbox(accessToken, options);\n  }\n};\n\nvar What3Words = {\n  class: L.Class.extend({\n    options: {\n      serviceUrl: 'https://api.what3words.com/v2/'\n    },\n\n    initialize: function(accessToken) {\n      this._accessToken = accessToken;\n    },\n\n    geocode: function(query, cb, context) {\n      //get three words and make a dot based string\n      getJSON(\n        this.options.serviceUrl + 'forward',\n        {\n          key: this._accessToken,\n          addr: query.split(/\\s+/).join('.')\n        },\n        function(data) {\n          var results = [],\n            latLng,\n            latLngBounds;\n          if (data.hasOwnProperty('geometry')) {\n            latLng = L.latLng(data.geometry['lat'], data.geometry['lng']);\n            latLngBounds = L.latLngBounds(latLng, latLng);\n            results[0] = {\n              name: data.words,\n              bbox: latLngBounds,\n              center: latLng\n            };\n          }\n\n          cb.call(context, results);\n        }\n      );\n    },\n\n    suggest: function(query, cb, context) {\n      return this.geocode(query, cb, context);\n    },\n\n    reverse: function(location, scale, cb, context) {\n      getJSON(\n        this.options.serviceUrl + 'reverse',\n        {\n          key: this._accessToken,\n          coords: [location.lat, location.lng].join(',')\n        },\n        function(data) {\n          var results = [],\n            latLng,\n            latLngBounds;\n          if (data.status.status == 200) {\n            latLng = L.latLng(data.geometry['lat'], data.geometry['lng']);\n            latLngBounds = L.latLngBounds(latLng, latLng);\n            results[0] = {\n              name: data.words,\n              bbox: latLngBounds,\n              center: latLng\n            };\n          }\n          cb.call(context, results);\n        }\n      );\n    }\n  }),\n\n  factory: function(accessToken) {\n    return new L.Control.Geocoder.What3Words(accessToken);\n  }\n};\n\nvar Google = {\n  class: L.Class.extend({\n    options: {\n      serviceUrl: 'https://maps.googleapis.com/maps/api/geocode/json',\n      geocodingQueryParams: {},\n      reverseQueryParams: {}\n    },\n\n    initialize: function(key, options) {\n      this._key = key;\n      L.setOptions(this, options);\n      // Backwards compatibility\n      this.options.serviceUrl = this.options.service_url || this.options.serviceUrl;\n    },\n\n    geocode: function(query, cb, context) {\n      var params = {\n        address: query\n      };\n\n      if (this._key && this._key.length) {\n        params.key = this._key;\n      }\n\n      params = L.Util.extend(params, this.options.geocodingQueryParams);\n\n      getJSON(this.options.serviceUrl, params, function(data) {\n        var results = [],\n          loc,\n          latLng,\n          latLngBounds;\n        if (data.results && data.results.length) {\n          for (var i = 0; i <= data.results.length - 1; i++) {\n            loc = data.results[i];\n            latLng = L.latLng(loc.geometry.location);\n            latLngBounds = L.latLngBounds(\n              L.latLng(loc.geometry.viewport.northeast),\n              L.latLng(loc.geometry.viewport.southwest)\n            );\n            results[i] = {\n              name: loc.formatted_address,\n              bbox: latLngBounds,\n              center: latLng,\n              properties: loc.address_components\n            };\n          }\n        }\n\n        cb.call(context, results);\n      });\n    },\n\n    reverse: function(location, scale, cb, context) {\n      var params = {\n        latlng: encodeURIComponent(location.lat) + ',' + encodeURIComponent(location.lng)\n      };\n      params = L.Util.extend(params, this.options.reverseQueryParams);\n      if (this._key && this._key.length) {\n        params.key = this._key;\n      }\n\n      getJSON(this.options.serviceUrl, params, function(data) {\n        var results = [],\n          loc,\n          latLng,\n          latLngBounds;\n        if (data.results && data.results.length) {\n          for (var i = 0; i <= data.results.length - 1; i++) {\n            loc = data.results[i];\n            latLng = L.latLng(loc.geometry.location);\n            latLngBounds = L.latLngBounds(\n              L.latLng(loc.geometry.viewport.northeast),\n              L.latLng(loc.geometry.viewport.southwest)\n            );\n            results[i] = {\n              name: loc.formatted_address,\n              bbox: latLngBounds,\n              center: latLng,\n              properties: loc.address_components\n            };\n          }\n        }\n\n        cb.call(context, results);\n      });\n    }\n  }),\n\n  factory: function(key, options) {\n    return new L.Control.Geocoder.Google(key, options);\n  }\n};\n\nvar Photon = {\n  class: L.Class.extend({\n    options: {\n      serviceUrl: 'https://photon.komoot.de/api/',\n      reverseUrl: 'https://photon.komoot.de/reverse/',\n      nameProperties: ['name', 'street', 'suburb', 'hamlet', 'town', 'city', 'state', 'country']\n    },\n\n    initialize: function(options) {\n      L.setOptions(this, options);\n    },\n\n    geocode: function(query, cb, context) {\n      var params = L.extend(\n        {\n          q: query\n        },\n        this.options.geocodingQueryParams\n      );\n\n      getJSON(\n        this.options.serviceUrl,\n        params,\n        L.bind(function(data) {\n          cb.call(context, this._decodeFeatures(data));\n        }, this)\n      );\n    },\n\n    suggest: function(query, cb, context) {\n      return this.geocode(query, cb, context);\n    },\n\n    reverse: function(latLng, scale, cb, context) {\n      var params = L.extend(\n        {\n          lat: latLng.lat,\n          lon: latLng.lng\n        },\n        this.options.reverseQueryParams\n      );\n\n      getJSON(\n        this.options.reverseUrl,\n        params,\n        L.bind(function(data) {\n          cb.call(context, this._decodeFeatures(data));\n        }, this)\n      );\n    },\n\n    _decodeFeatures: function(data) {\n      var results = [],\n        i,\n        f,\n        c,\n        latLng,\n        extent,\n        bbox;\n\n      if (data && data.features) {\n        for (i = 0; i < data.features.length; i++) {\n          f = data.features[i];\n          c = f.geometry.coordinates;\n          latLng = L.latLng(c[1], c[0]);\n          extent = f.properties.extent;\n\n          if (extent) {\n            bbox = L.latLngBounds([extent[1], extent[0]], [extent[3], extent[2]]);\n          } else {\n            bbox = L.latLngBounds(latLng, latLng);\n          }\n\n          results.push({\n            name: this._deocodeFeatureName(f),\n            html: this.options.htmlTemplate ? this.options.htmlTemplate(f) : undefined,\n            center: latLng,\n            bbox: bbox,\n            properties: f.properties\n          });\n        }\n      }\n\n      return results;\n    },\n\n    _deocodeFeatureName: function(f) {\n      var j, name;\n      for (j = 0; !name && j < this.options.nameProperties.length; j++) {\n        name = f.properties[this.options.nameProperties[j]];\n      }\n\n      return name;\n    }\n  }),\n\n  factory: function(options) {\n    return new L.Control.Geocoder.Photon(options);\n  }\n};\n\nvar Mapzen = {\n  class: L.Class.extend({\n    options: {\n      serviceUrl: 'https://search.mapzen.com/v1',\n      geocodingQueryParams: {},\n      reverseQueryParams: {}\n    },\n\n    initialize: function(apiKey, options) {\n      L.Util.setOptions(this, options);\n      this._apiKey = apiKey;\n      this._lastSuggest = 0;\n    },\n\n    geocode: function(query, cb, context) {\n      var _this = this;\n      getJSON(\n        this.options.serviceUrl + '/search',\n        L.extend(\n          {\n            api_key: this._apiKey,\n            text: query\n          },\n          this.options.geocodingQueryParams\n        ),\n        function(data) {\n          cb.call(context, _this._parseResults(data, 'bbox'));\n        }\n      );\n    },\n\n    suggest: function(query, cb, context) {\n      var _this = this;\n      getJSON(\n        this.options.serviceUrl + '/autocomplete',\n        L.extend(\n          {\n            api_key: this._apiKey,\n            text: query\n          },\n          this.options.geocodingQueryParams\n        ),\n        L.bind(function(data) {\n          if (data.geocoding.timestamp > this._lastSuggest) {\n            this._lastSuggest = data.geocoding.timestamp;\n            cb.call(context, _this._parseResults(data, 'bbox'));\n          }\n        }, this)\n      );\n    },\n\n    reverse: function(location, scale, cb, context) {\n      var _this = this;\n      getJSON(\n        this.options.serviceUrl + '/reverse',\n        L.extend(\n          {\n            api_key: this._apiKey,\n            'point.lat': location.lat,\n            'point.lon': location.lng\n          },\n          this.options.reverseQueryParams\n        ),\n        function(data) {\n          cb.call(context, _this._parseResults(data, 'bounds'));\n        }\n      );\n    },\n\n    _parseResults: function(data, bboxname) {\n      var results = [];\n      L.geoJson(data, {\n        pointToLayer: function(feature, latlng) {\n          return L.circleMarker(latlng);\n        },\n        onEachFeature: function(feature, layer) {\n          var result = {},\n            bbox,\n            center;\n\n          if (layer.getBounds) {\n            bbox = layer.getBounds();\n            center = bbox.getCenter();\n          } else {\n            center = layer.getLatLng();\n            bbox = L.latLngBounds(center, center);\n          }\n\n          result.name = layer.feature.properties.label;\n          result.center = center;\n          result[bboxname] = bbox;\n          result.properties = layer.feature.properties;\n          results.push(result);\n        }\n      });\n      return results;\n    }\n  }),\n\n  factory: function(apiKey, options) {\n    return new L.Control.Geocoder.Mapzen(apiKey, options);\n  }\n};\n\nvar ArcGis = {\n  class: L.Class.extend({\n    options: {\n      service_url: 'http://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer'\n    },\n\n    initialize: function(accessToken, options) {\n      L.setOptions(this, options);\n      this._accessToken = accessToken;\n    },\n\n    geocode: function(query, cb, context) {\n      var params = {\n        SingleLine: query,\n        outFields: 'Addr_Type',\n        forStorage: false,\n        maxLocations: 10,\n        f: 'json'\n      };\n\n      if (this._key && this._key.length) {\n        params.token = this._key;\n      }\n\n      getJSON(this.options.service_url + '/findAddressCandidates', params, function(data) {\n        var results = [],\n          loc,\n          latLng,\n          latLngBounds;\n\n        if (data.candidates && data.candidates.length) {\n          for (var i = 0; i <= data.candidates.length - 1; i++) {\n            loc = data.candidates[i];\n            latLng = L.latLng(loc.location.y, loc.location.x);\n            latLngBounds = L.latLngBounds(\n              L.latLng(loc.extent.ymax, loc.extent.xmax),\n              L.latLng(loc.extent.ymin, loc.extent.xmin)\n            );\n            results[i] = {\n              name: loc.address,\n              bbox: latLngBounds,\n              center: latLng\n            };\n          }\n        }\n\n        cb.call(context, results);\n      });\n    },\n\n    suggest: function(query, cb, context) {\n      return this.geocode(query, cb, context);\n    },\n\n    reverse: function(location, scale, cb, context) {\n      var params = {\n        location: encodeURIComponent(location.lng) + ',' + encodeURIComponent(location.lat),\n        distance: 100,\n        f: 'json'\n      };\n\n      getJSON(this.options.service_url + '/reverseGeocode', params, function(data) {\n        var result = [],\n          loc;\n\n        if (data && !data.error) {\n          loc = L.latLng(data.location.y, data.location.x);\n          result.push({\n            name: data.address.Match_addr,\n            center: loc,\n            bounds: L.latLngBounds(loc, loc)\n          });\n        }\n\n        cb.call(context, result);\n      });\n    }\n  }),\n\n  factory: function(accessToken, options) {\n    return new L.Control.Geocoder.ArcGis(accessToken, options);\n  }\n};\n\nvar HERE = {\n  class: L.Class.extend({\n    options: {\n      geocodeUrl: 'http://geocoder.api.here.com/6.2/geocode.json',\n      reverseGeocodeUrl: 'http://reverse.geocoder.api.here.com/6.2/reversegeocode.json',\n      app_id: '<insert your app_id here>',\n      app_code: '<insert your app_code here>',\n      geocodingQueryParams: {},\n      reverseQueryParams: {}\n    },\n\n    initialize: function(options) {\n      L.setOptions(this, options);\n    },\n\n    geocode: function(query, cb, context) {\n      var params = {\n        searchtext: query,\n        gen: 9,\n        app_id: this.options.app_id,\n        app_code: this.options.app_code,\n        jsonattributes: 1\n      };\n      params = L.Util.extend(params, this.options.geocodingQueryParams);\n      this.getJSON(this.options.geocodeUrl, params, cb, context);\n    },\n\n    reverse: function(location, scale, cb, context) {\n      var params = {\n        prox: encodeURIComponent(location.lat) + ',' + encodeURIComponent(location.lng),\n        mode: 'retrieveAddresses',\n        app_id: this.options.app_id,\n        app_code: this.options.app_code,\n        gen: 9,\n        jsonattributes: 1\n      };\n      params = L.Util.extend(params, this.options.reverseQueryParams);\n      this.getJSON(this.options.reverseGeocodeUrl, params, cb, context);\n    },\n\n    getJSON: function(url, params, cb, context) {\n      getJSON(url, params, function(data) {\n        var results = [],\n          loc,\n          latLng,\n          latLngBounds;\n        if (data.response.view && data.response.view.length) {\n          for (var i = 0; i <= data.response.view[0].result.length - 1; i++) {\n            loc = data.response.view[0].result[i].location;\n            latLng = L.latLng(loc.displayPosition.latitude, loc.displayPosition.longitude);\n            latLngBounds = L.latLngBounds(\n              L.latLng(loc.mapView.topLeft.latitude, loc.mapView.topLeft.longitude),\n              L.latLng(loc.mapView.bottomRight.latitude, loc.mapView.bottomRight.longitude)\n            );\n            results[i] = {\n              name: loc.address.label,\n              bbox: latLngBounds,\n              center: latLng\n            };\n          }\n        }\n        cb.call(context, results);\n      });\n    }\n  }),\n\n  factory: function(options) {\n    return new L.Control.Geocoder.HERE(options);\n  }\n};\n\nvar Geocoder = L.Util.extend(Control.class, {\n  Nominatim: Nominatim.class,\n  nominatim: Nominatim.factory,\n  Bing: Bing.class,\n  bing: Bing.factory,\n  MapQuest: MapQuest.class,\n  mapQuest: MapQuest.factory,\n  Mapbox: Mapbox.class,\n  mapbox: Mapbox.factory,\n  What3Words: What3Words.class,\n  what3words: What3Words.factory,\n  Google: Google.class,\n  google: Google.factory,\n  Photon: Photon.class,\n  photon: Photon.factory,\n  Mapzen: Mapzen.class,\n  mapzen: Mapzen.factory,\n  ArcGis: ArcGis.class,\n  arcgis: ArcGis.factory,\n  HERE: HERE.class,\n  here: HERE.factory\n});\n\nL.Util.extend(L.Control, {\n  Geocoder: Geocoder,\n  geocoder: Control.factory\n});\n\nreturn Geocoder;\n\n}(L));\n//# sourceMappingURL=Control.Geocoder.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9sZWFmbGV0LWNvbnRyb2wtZ2VvY29kZXIvZGlzdC9Db250cm9sLkdlb2NvZGVyLmpzP2ViYWUiXSwic291cmNlc0NvbnRlbnQiOlsidGhpcy5MID0gdGhpcy5MIHx8IHt9O1xudGhpcy5MLkNvbnRyb2wgPSB0aGlzLkwuQ29udHJvbCB8fCB7fTtcbnRoaXMuTC5Db250cm9sLkdlb2NvZGVyID0gKGZ1bmN0aW9uIChMKSB7XG4ndXNlIHN0cmljdCc7XG5cbkwgPSBMICYmIEwuaGFzT3duUHJvcGVydHkoJ2RlZmF1bHQnKSA/IExbJ2RlZmF1bHQnXSA6IEw7XG5cbnZhciBsYXN0Q2FsbGJhY2tJZCA9IDA7XG5cbi8vIEFkYXB0ZWQgZnJvbSBoYW5kbGViYXJzLmpzXG4vLyBodHRwczovL2dpdGh1Yi5jb20vd3ljYXRzL2hhbmRsZWJhcnMuanMvXG52YXIgYmFkQ2hhcnMgPSAvWyY8PlwiJ2BdL2c7XG52YXIgcG9zc2libGUgPSAvWyY8PlwiJ2BdLztcbnZhciBlc2NhcGUgPSB7XG4gICcmJzogJyZhbXA7JyxcbiAgJzwnOiAnJmx0OycsXG4gICc+JzogJyZndDsnLFxuICAnXCInOiAnJnF1b3Q7JyxcbiAgXCInXCI6ICcmI3gyNzsnLFxuICAnYCc6ICcmI3g2MDsnXG59O1xuXG5mdW5jdGlvbiBlc2NhcGVDaGFyKGNocikge1xuICByZXR1cm4gZXNjYXBlW2Nocl07XG59XG5cbmZ1bmN0aW9uIGh0bWxFc2NhcGUoc3RyaW5nKSB7XG4gIGlmIChzdHJpbmcgPT0gbnVsbCkge1xuICAgIHJldHVybiAnJztcbiAgfSBlbHNlIGlmICghc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZyArICcnO1xuICB9XG5cbiAgLy8gRm9yY2UgYSBzdHJpbmcgY29udmVyc2lvbiBhcyB0aGlzIHdpbGwgYmUgZG9uZSBieSB0aGUgYXBwZW5kIHJlZ2FyZGxlc3MgYW5kXG4gIC8vIHRoZSByZWdleCB0ZXN0IHdpbGwgZG8gdGhpcyB0cmFuc3BhcmVudGx5IGJlaGluZCB0aGUgc2NlbmVzLCBjYXVzaW5nIGlzc3VlcyBpZlxuICAvLyBhbiBvYmplY3QncyB0byBzdHJpbmcgaGFzIGVzY2FwZWQgY2hhcmFjdGVycyBpbiBpdC5cbiAgc3RyaW5nID0gJycgKyBzdHJpbmc7XG5cbiAgaWYgKCFwb3NzaWJsZS50ZXN0KHN0cmluZykpIHtcbiAgICByZXR1cm4gc3RyaW5nO1xuICB9XG4gIHJldHVybiBzdHJpbmcucmVwbGFjZShiYWRDaGFycywgZXNjYXBlQ2hhcik7XG59XG5cbmZ1bmN0aW9uIGpzb25wKHVybCwgcGFyYW1zLCBjYWxsYmFjaywgY29udGV4dCwganNvbnBQYXJhbSkge1xuICB2YXIgY2FsbGJhY2tJZCA9ICdfbF9nZW9jb2Rlcl8nICsgbGFzdENhbGxiYWNrSWQrKztcbiAgcGFyYW1zW2pzb25wUGFyYW0gfHwgJ2NhbGxiYWNrJ10gPSBjYWxsYmFja0lkO1xuICB3aW5kb3dbY2FsbGJhY2tJZF0gPSBMLlV0aWwuYmluZChjYWxsYmFjaywgY29udGV4dCk7XG4gIHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgc2NyaXB0LnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JztcbiAgc2NyaXB0LnNyYyA9IHVybCArIEwuVXRpbC5nZXRQYXJhbVN0cmluZyhwYXJhbXMpO1xuICBzY3JpcHQuaWQgPSBjYWxsYmFja0lkO1xuICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdLmFwcGVuZENoaWxkKHNjcmlwdCk7XG59XG5cbmZ1bmN0aW9uIGdldEpTT04odXJsLCBwYXJhbXMsIGNhbGxiYWNrKSB7XG4gIHZhciB4bWxIdHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gIHhtbEh0dHAub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHhtbEh0dHAucmVhZHlTdGF0ZSAhPT0gNCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoeG1sSHR0cC5zdGF0dXMgIT09IDIwMCAmJiB4bWxIdHRwLnN0YXR1cyAhPT0gMzA0KSB7XG4gICAgICBjYWxsYmFjaygnJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNhbGxiYWNrKEpTT04ucGFyc2UoeG1sSHR0cC5yZXNwb25zZSkpO1xuICB9O1xuICB4bWxIdHRwLm9wZW4oJ0dFVCcsIHVybCArIEwuVXRpbC5nZXRQYXJhbVN0cmluZyhwYXJhbXMpLCB0cnVlKTtcbiAgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCdBY2NlcHQnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICB4bWxIdHRwLnNlbmQobnVsbCk7XG59XG5cbmZ1bmN0aW9uIHRlbXBsYXRlKHN0ciwgZGF0YSkge1xuICByZXR1cm4gc3RyLnJlcGxhY2UoL1xceyAqKFtcXHdfXSspICpcXH0vZywgZnVuY3Rpb24oc3RyLCBrZXkpIHtcbiAgICB2YXIgdmFsdWUgPSBkYXRhW2tleV07XG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHZhbHVlID0gJyc7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHZhbHVlID0gdmFsdWUoZGF0YSk7XG4gICAgfVxuICAgIHJldHVybiBodG1sRXNjYXBlKHZhbHVlKTtcbiAgfSk7XG59XG5cbnZhciBOb21pbmF0aW0gPSB7XG4gIGNsYXNzOiBMLkNsYXNzLmV4dGVuZCh7XG4gICAgb3B0aW9uczoge1xuICAgICAgc2VydmljZVVybDogJ2h0dHBzOi8vbm9taW5hdGltLm9wZW5zdHJlZXRtYXAub3JnLycsXG4gICAgICBnZW9jb2RpbmdRdWVyeVBhcmFtczoge30sXG4gICAgICByZXZlcnNlUXVlcnlQYXJhbXM6IHt9LFxuICAgICAgaHRtbFRlbXBsYXRlOiBmdW5jdGlvbihyKSB7XG4gICAgICAgIHZhciBhID0gci5hZGRyZXNzLFxuICAgICAgICAgIHBhcnRzID0gW107XG4gICAgICAgIGlmIChhLnJvYWQgfHwgYS5idWlsZGluZykge1xuICAgICAgICAgIHBhcnRzLnB1c2goJ3tidWlsZGluZ30ge3JvYWR9IHtob3VzZV9udW1iZXJ9Jyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYS5jaXR5IHx8IGEudG93biB8fCBhLnZpbGxhZ2UgfHwgYS5oYW1sZXQpIHtcbiAgICAgICAgICBwYXJ0cy5wdXNoKFxuICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwiJyArXG4gICAgICAgICAgICAgIChwYXJ0cy5sZW5ndGggPiAwID8gJ2xlYWZsZXQtY29udHJvbC1nZW9jb2Rlci1hZGRyZXNzLWRldGFpbCcgOiAnJykgK1xuICAgICAgICAgICAgICAnXCI+e3Bvc3Rjb2RlfSB7Y2l0eX0ge3Rvd259IHt2aWxsYWdlfSB7aGFtbGV0fTwvc3Bhbj4nXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhLnN0YXRlIHx8IGEuY291bnRyeSkge1xuICAgICAgICAgIHBhcnRzLnB1c2goXG4gICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCInICtcbiAgICAgICAgICAgICAgKHBhcnRzLmxlbmd0aCA+IDAgPyAnbGVhZmxldC1jb250cm9sLWdlb2NvZGVyLWFkZHJlc3MtY29udGV4dCcgOiAnJykgK1xuICAgICAgICAgICAgICAnXCI+e3N0YXRlfSB7Y291bnRyeX08L3NwYW4+J1xuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGVtcGxhdGUocGFydHMuam9pbignPGJyLz4nKSwgYSwgdHJ1ZSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIEwuVXRpbC5zZXRPcHRpb25zKHRoaXMsIG9wdGlvbnMpO1xuICAgIH0sXG5cbiAgICBnZW9jb2RlOiBmdW5jdGlvbihxdWVyeSwgY2IsIGNvbnRleHQpIHtcbiAgICAgIGdldEpTT04oXG4gICAgICAgIHRoaXMub3B0aW9ucy5zZXJ2aWNlVXJsICsgJ3NlYXJjaCcsXG4gICAgICAgIEwuZXh0ZW5kKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHE6IHF1ZXJ5LFxuICAgICAgICAgICAgbGltaXQ6IDUsXG4gICAgICAgICAgICBmb3JtYXQ6ICdqc29uJyxcbiAgICAgICAgICAgIGFkZHJlc3NkZXRhaWxzOiAxXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0aGlzLm9wdGlvbnMuZ2VvY29kaW5nUXVlcnlQYXJhbXNcbiAgICAgICAgKSxcbiAgICAgICAgTC5iaW5kKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICB2YXIgcmVzdWx0cyA9IFtdO1xuICAgICAgICAgIGZvciAodmFyIGkgPSBkYXRhLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICB2YXIgYmJveCA9IGRhdGFbaV0uYm91bmRpbmdib3g7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IDQ7IGorKykgYmJveFtqXSA9IHBhcnNlRmxvYXQoYmJveFtqXSk7XG4gICAgICAgICAgICByZXN1bHRzW2ldID0ge1xuICAgICAgICAgICAgICBpY29uOiBkYXRhW2ldLmljb24sXG4gICAgICAgICAgICAgIG5hbWU6IGRhdGFbaV0uZGlzcGxheV9uYW1lLFxuICAgICAgICAgICAgICBodG1sOiB0aGlzLm9wdGlvbnMuaHRtbFRlbXBsYXRlID8gdGhpcy5vcHRpb25zLmh0bWxUZW1wbGF0ZShkYXRhW2ldKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgYmJveDogTC5sYXRMbmdCb3VuZHMoW2Jib3hbMF0sIGJib3hbMl1dLCBbYmJveFsxXSwgYmJveFszXV0pLFxuICAgICAgICAgICAgICBjZW50ZXI6IEwubGF0TG5nKGRhdGFbaV0ubGF0LCBkYXRhW2ldLmxvbiksXG4gICAgICAgICAgICAgIHByb3BlcnRpZXM6IGRhdGFbaV1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIGNiLmNhbGwoY29udGV4dCwgcmVzdWx0cyk7XG4gICAgICAgIH0sIHRoaXMpXG4gICAgICApO1xuICAgIH0sXG5cbiAgICByZXZlcnNlOiBmdW5jdGlvbihsb2NhdGlvbiwgc2NhbGUsIGNiLCBjb250ZXh0KSB7XG4gICAgICBnZXRKU09OKFxuICAgICAgICB0aGlzLm9wdGlvbnMuc2VydmljZVVybCArICdyZXZlcnNlJyxcbiAgICAgICAgTC5leHRlbmQoXG4gICAgICAgICAge1xuICAgICAgICAgICAgbGF0OiBsb2NhdGlvbi5sYXQsXG4gICAgICAgICAgICBsb246IGxvY2F0aW9uLmxuZyxcbiAgICAgICAgICAgIHpvb206IE1hdGgucm91bmQoTWF0aC5sb2coc2NhbGUgLyAyNTYpIC8gTWF0aC5sb2coMikpLFxuICAgICAgICAgICAgYWRkcmVzc2RldGFpbHM6IDEsXG4gICAgICAgICAgICBmb3JtYXQ6ICdqc29uJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdGhpcy5vcHRpb25zLnJldmVyc2VRdWVyeVBhcmFtc1xuICAgICAgICApLFxuICAgICAgICBMLmJpbmQoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgIHZhciByZXN1bHQgPSBbXSxcbiAgICAgICAgICAgIGxvYztcblxuICAgICAgICAgIGlmIChkYXRhICYmIGRhdGEubGF0ICYmIGRhdGEubG9uKSB7XG4gICAgICAgICAgICBsb2MgPSBMLmxhdExuZyhkYXRhLmxhdCwgZGF0YS5sb24pO1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goe1xuICAgICAgICAgICAgICBuYW1lOiBkYXRhLmRpc3BsYXlfbmFtZSxcbiAgICAgICAgICAgICAgaHRtbDogdGhpcy5vcHRpb25zLmh0bWxUZW1wbGF0ZSA/IHRoaXMub3B0aW9ucy5odG1sVGVtcGxhdGUoZGF0YSkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgIGNlbnRlcjogbG9jLFxuICAgICAgICAgICAgICBib3VuZHM6IEwubGF0TG5nQm91bmRzKGxvYywgbG9jKSxcbiAgICAgICAgICAgICAgcHJvcGVydGllczogZGF0YVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY2IuY2FsbChjb250ZXh0LCByZXN1bHQpO1xuICAgICAgICB9LCB0aGlzKVxuICAgICAgKTtcbiAgICB9XG4gIH0pLFxuXG4gIGZhY3Rvcnk6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IEwuQ29udHJvbC5HZW9jb2Rlci5Ob21pbmF0aW0ob3B0aW9ucyk7XG4gIH1cbn07XG5cbnZhciBDb250cm9sID0ge1xuICBjbGFzczogTC5Db250cm9sLmV4dGVuZCh7XG4gICAgb3B0aW9uczoge1xuICAgICAgc2hvd1Jlc3VsdEljb25zOiBmYWxzZSxcbiAgICAgIGNvbGxhcHNlZDogdHJ1ZSxcbiAgICAgIGV4cGFuZDogJ3RvdWNoJywgLy8gb3B0aW9uczogdG91Y2gsIGNsaWNrLCBhbnl0aGluZ2Vsc2VcbiAgICAgIHBvc2l0aW9uOiAndG9wcmlnaHQnLFxuICAgICAgcGxhY2Vob2xkZXI6ICdTZWFyY2guLi4nLFxuICAgICAgZXJyb3JNZXNzYWdlOiAnTm90aGluZyBmb3VuZC4nLFxuICAgICAgc3VnZ2VzdE1pbkxlbmd0aDogMyxcbiAgICAgIHN1Z2dlc3RUaW1lb3V0OiAyNTAsXG4gICAgICBkZWZhdWx0TWFya0dlb2NvZGU6IHRydWVcbiAgICB9LFxuXG4gICAgaW5jbHVkZXM6IEwuRXZlbnRlZC5wcm90b3R5cGUgfHwgTC5NaXhpbi5FdmVudHMsXG5cbiAgICBpbml0aWFsaXplOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICBMLlV0aWwuc2V0T3B0aW9ucyh0aGlzLCBvcHRpb25zKTtcbiAgICAgIGlmICghdGhpcy5vcHRpb25zLmdlb2NvZGVyKSB7XG4gICAgICAgIHRoaXMub3B0aW9ucy5nZW9jb2RlciA9IG5ldyBOb21pbmF0aW0uY2xhc3MoKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fcmVxdWVzdENvdW50ID0gMDtcbiAgICB9LFxuXG4gICAgb25BZGQ6IGZ1bmN0aW9uKG1hcCkge1xuICAgICAgdmFyIGNsYXNzTmFtZSA9ICdsZWFmbGV0LWNvbnRyb2wtZ2VvY29kZXInLFxuICAgICAgICBjb250YWluZXIgPSBMLkRvbVV0aWwuY3JlYXRlKCdkaXYnLCBjbGFzc05hbWUgKyAnIGxlYWZsZXQtYmFyJyksXG4gICAgICAgIGljb24gPSBMLkRvbVV0aWwuY3JlYXRlKCdidXR0b24nLCBjbGFzc05hbWUgKyAnLWljb24nLCBjb250YWluZXIpLFxuICAgICAgICBmb3JtID0gKHRoaXMuX2Zvcm0gPSBMLkRvbVV0aWwuY3JlYXRlKCdkaXYnLCBjbGFzc05hbWUgKyAnLWZvcm0nLCBjb250YWluZXIpKSxcbiAgICAgICAgaW5wdXQ7XG5cbiAgICAgIHRoaXMuX21hcCA9IG1hcDtcbiAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lcjtcblxuICAgICAgaWNvbi5pbm5lckhUTUwgPSAnJm5ic3A7JztcbiAgICAgIGljb24udHlwZSA9ICdidXR0b24nO1xuXG4gICAgICBpbnB1dCA9IHRoaXMuX2lucHV0ID0gTC5Eb21VdGlsLmNyZWF0ZSgnaW5wdXQnLCAnJywgZm9ybSk7XG4gICAgICBpbnB1dC50eXBlID0gJ3RleHQnO1xuICAgICAgaW5wdXQucGxhY2Vob2xkZXIgPSB0aGlzLm9wdGlvbnMucGxhY2Vob2xkZXI7XG5cbiAgICAgIHRoaXMuX2Vycm9yRWxlbWVudCA9IEwuRG9tVXRpbC5jcmVhdGUoJ2RpdicsIGNsYXNzTmFtZSArICctZm9ybS1uby1lcnJvcicsIGNvbnRhaW5lcik7XG4gICAgICB0aGlzLl9lcnJvckVsZW1lbnQuaW5uZXJIVE1MID0gdGhpcy5vcHRpb25zLmVycm9yTWVzc2FnZTtcblxuICAgICAgdGhpcy5fYWx0cyA9IEwuRG9tVXRpbC5jcmVhdGUoXG4gICAgICAgICd1bCcsXG4gICAgICAgIGNsYXNzTmFtZSArICctYWx0ZXJuYXRpdmVzIGxlYWZsZXQtY29udHJvbC1nZW9jb2Rlci1hbHRlcm5hdGl2ZXMtbWluaW1pemVkJyxcbiAgICAgICAgY29udGFpbmVyXG4gICAgICApO1xuICAgICAgTC5Eb21FdmVudC5kaXNhYmxlQ2xpY2tQcm9wYWdhdGlvbih0aGlzLl9hbHRzKTtcblxuICAgICAgTC5Eb21FdmVudC5hZGRMaXN0ZW5lcihpbnB1dCwgJ2tleWRvd24nLCB0aGlzLl9rZXlkb3duLCB0aGlzKTtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZ2VvY29kZXIuc3VnZ2VzdCkge1xuICAgICAgICBMLkRvbUV2ZW50LmFkZExpc3RlbmVyKGlucHV0LCAnaW5wdXQnLCB0aGlzLl9jaGFuZ2UsIHRoaXMpO1xuICAgICAgfVxuICAgICAgTC5Eb21FdmVudC5hZGRMaXN0ZW5lcihcbiAgICAgICAgaW5wdXQsXG4gICAgICAgICdibHVyJyxcbiAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5jb2xsYXBzZWQgJiYgIXRoaXMuX3ByZXZlbnRCbHVyQ29sbGFwc2UpIHtcbiAgICAgICAgICAgIHRoaXMuX2NvbGxhcHNlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuX3ByZXZlbnRCbHVyQ29sbGFwc2UgPSBmYWxzZTtcbiAgICAgICAgfSxcbiAgICAgICAgdGhpc1xuICAgICAgKTtcblxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5jb2xsYXBzZWQpIHtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5leHBhbmQgPT09ICdjbGljaycpIHtcbiAgICAgICAgICBMLkRvbUV2ZW50LmFkZExpc3RlbmVyKFxuICAgICAgICAgICAgY29udGFpbmVyLFxuICAgICAgICAgICAgJ2NsaWNrJyxcbiAgICAgICAgICAgIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgaWYgKGUuYnV0dG9uID09PSAwICYmIGUuZGV0YWlsICE9PSAyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdG9nZ2xlKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0aGlzXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmIChMLkJyb3dzZXIudG91Y2ggJiYgdGhpcy5vcHRpb25zLmV4cGFuZCA9PT0gJ3RvdWNoJykge1xuICAgICAgICAgIEwuRG9tRXZlbnQuYWRkTGlzdGVuZXIoXG4gICAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgICAndG91Y2hzdGFydCBtb3VzZWRvd24nLFxuICAgICAgICAgICAgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICB0aGlzLl90b2dnbGUoKTtcbiAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyAvLyBtb2JpbGU6IGNsaWNraW5nIGZvY3VzZXMgdGhlIGljb24sIHNvIFVJIGV4cGFuZHMgYW5kIGltbWVkaWF0ZWx5IGNvbGxhcHNlc1xuICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRoaXNcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIEwuRG9tRXZlbnQuYWRkTGlzdGVuZXIoY29udGFpbmVyLCAnbW91c2VvdmVyJywgdGhpcy5fZXhwYW5kLCB0aGlzKTtcbiAgICAgICAgICBMLkRvbUV2ZW50LmFkZExpc3RlbmVyKGNvbnRhaW5lciwgJ21vdXNlb3V0JywgdGhpcy5fY29sbGFwc2UsIHRoaXMpO1xuICAgICAgICAgIHRoaXMuX21hcC5vbignbW92ZXN0YXJ0JywgdGhpcy5fY29sbGFwc2UsIHRoaXMpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9leHBhbmQoKTtcbiAgICAgICAgaWYgKEwuQnJvd3Nlci50b3VjaCkge1xuICAgICAgICAgIEwuRG9tRXZlbnQuYWRkTGlzdGVuZXIoXG4gICAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgICAndG91Y2hzdGFydCcsXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgdGhpcy5fZ2VvY29kZSgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRoaXNcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIEwuRG9tRXZlbnQuYWRkTGlzdGVuZXIoXG4gICAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgICAnY2xpY2snLFxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHRoaXMuX2dlb2NvZGUoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0aGlzXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5vcHRpb25zLmRlZmF1bHRNYXJrR2VvY29kZSkge1xuICAgICAgICB0aGlzLm9uKCdtYXJrZ2VvY29kZScsIHRoaXMubWFya0dlb2NvZGUsIHRoaXMpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLm9uKFxuICAgICAgICAnc3RhcnRnZW9jb2RlJyxcbiAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgTC5Eb21VdGlsLmFkZENsYXNzKHRoaXMuX2NvbnRhaW5lciwgJ2xlYWZsZXQtY29udHJvbC1nZW9jb2Rlci10aHJvYmJlcicpO1xuICAgICAgICB9LFxuICAgICAgICB0aGlzXG4gICAgICApO1xuICAgICAgdGhpcy5vbihcbiAgICAgICAgJ2ZpbmlzaGdlb2NvZGUnLFxuICAgICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgICBMLkRvbVV0aWwucmVtb3ZlQ2xhc3ModGhpcy5fY29udGFpbmVyLCAnbGVhZmxldC1jb250cm9sLWdlb2NvZGVyLXRocm9iYmVyJyk7XG4gICAgICAgIH0sXG4gICAgICAgIHRoaXNcbiAgICAgICk7XG5cbiAgICAgIEwuRG9tRXZlbnQuZGlzYWJsZUNsaWNrUHJvcGFnYXRpb24oY29udGFpbmVyKTtcblxuICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgICB9LFxuXG4gICAgX2dlb2NvZGVSZXN1bHQ6IGZ1bmN0aW9uKHJlc3VsdHMsIHN1Z2dlc3QpIHtcbiAgICAgIGlmICghc3VnZ2VzdCAmJiByZXN1bHRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICB0aGlzLl9nZW9jb2RlUmVzdWx0U2VsZWN0ZWQocmVzdWx0c1swXSk7XG4gICAgICB9IGVsc2UgaWYgKHJlc3VsdHMubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLl9hbHRzLmlubmVySFRNTCA9ICcnO1xuICAgICAgICB0aGlzLl9yZXN1bHRzID0gcmVzdWx0cztcbiAgICAgICAgTC5Eb21VdGlsLnJlbW92ZUNsYXNzKHRoaXMuX2FsdHMsICdsZWFmbGV0LWNvbnRyb2wtZ2VvY29kZXItYWx0ZXJuYXRpdmVzLW1pbmltaXplZCcpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlc3VsdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB0aGlzLl9hbHRzLmFwcGVuZENoaWxkKHRoaXMuX2NyZWF0ZUFsdChyZXN1bHRzW2ldLCBpKSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIEwuRG9tVXRpbC5hZGRDbGFzcyh0aGlzLl9lcnJvckVsZW1lbnQsICdsZWFmbGV0LWNvbnRyb2wtZ2VvY29kZXItZXJyb3InKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgbWFya0dlb2NvZGU6IGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgcmVzdWx0ID0gcmVzdWx0Lmdlb2NvZGUgfHwgcmVzdWx0O1xuXG4gICAgICB0aGlzLl9tYXAuZml0Qm91bmRzKHJlc3VsdC5iYm94KTtcblxuICAgICAgaWYgKHRoaXMuX2dlb2NvZGVNYXJrZXIpIHtcbiAgICAgICAgdGhpcy5fbWFwLnJlbW92ZUxheWVyKHRoaXMuX2dlb2NvZGVNYXJrZXIpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9nZW9jb2RlTWFya2VyID0gbmV3IEwuTWFya2VyKHJlc3VsdC5jZW50ZXIpXG4gICAgICAgIC5iaW5kUG9wdXAocmVzdWx0Lmh0bWwgfHwgcmVzdWx0Lm5hbWUpXG4gICAgICAgIC5hZGRUbyh0aGlzLl9tYXApXG4gICAgICAgIC5vcGVuUG9wdXAoKTtcblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIF9nZW9jb2RlOiBmdW5jdGlvbihzdWdnZXN0KSB7XG4gICAgICB2YXIgcmVxdWVzdENvdW50ID0gKyt0aGlzLl9yZXF1ZXN0Q291bnQsXG4gICAgICAgIG1vZGUgPSBzdWdnZXN0ID8gJ3N1Z2dlc3QnIDogJ2dlb2NvZGUnLFxuICAgICAgICBldmVudERhdGEgPSB7IGlucHV0OiB0aGlzLl9pbnB1dC52YWx1ZSB9O1xuXG4gICAgICB0aGlzLl9sYXN0R2VvY29kZSA9IHRoaXMuX2lucHV0LnZhbHVlO1xuICAgICAgaWYgKCFzdWdnZXN0KSB7XG4gICAgICAgIHRoaXMuX2NsZWFyUmVzdWx0cygpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmZpcmUoJ3N0YXJ0JyArIG1vZGUsIGV2ZW50RGF0YSk7XG4gICAgICB0aGlzLm9wdGlvbnMuZ2VvY29kZXJbbW9kZV0oXG4gICAgICAgIHRoaXMuX2lucHV0LnZhbHVlLFxuICAgICAgICBmdW5jdGlvbihyZXN1bHRzKSB7XG4gICAgICAgICAgaWYgKHJlcXVlc3RDb3VudCA9PT0gdGhpcy5fcmVxdWVzdENvdW50KSB7XG4gICAgICAgICAgICBldmVudERhdGEucmVzdWx0cyA9IHJlc3VsdHM7XG4gICAgICAgICAgICB0aGlzLmZpcmUoJ2ZpbmlzaCcgKyBtb2RlLCBldmVudERhdGEpO1xuICAgICAgICAgICAgdGhpcy5fZ2VvY29kZVJlc3VsdChyZXN1bHRzLCBzdWdnZXN0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHRoaXNcbiAgICAgICk7XG4gICAgfSxcblxuICAgIF9nZW9jb2RlUmVzdWx0U2VsZWN0ZWQ6IGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgdGhpcy5maXJlKCdtYXJrZ2VvY29kZScsIHsgZ2VvY29kZTogcmVzdWx0IH0pO1xuICAgIH0sXG5cbiAgICBfdG9nZ2xlOiBmdW5jdGlvbigpIHtcbiAgICAgIGlmIChMLkRvbVV0aWwuaGFzQ2xhc3ModGhpcy5fY29udGFpbmVyLCAnbGVhZmxldC1jb250cm9sLWdlb2NvZGVyLWV4cGFuZGVkJykpIHtcbiAgICAgICAgdGhpcy5fY29sbGFwc2UoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2V4cGFuZCgpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBfZXhwYW5kOiBmdW5jdGlvbigpIHtcbiAgICAgIEwuRG9tVXRpbC5hZGRDbGFzcyh0aGlzLl9jb250YWluZXIsICdsZWFmbGV0LWNvbnRyb2wtZ2VvY29kZXItZXhwYW5kZWQnKTtcbiAgICAgIHRoaXMuX2lucHV0LnNlbGVjdCgpO1xuICAgICAgdGhpcy5maXJlKCdleHBhbmQnKTtcbiAgICB9LFxuXG4gICAgX2NvbGxhcHNlOiBmdW5jdGlvbigpIHtcbiAgICAgIEwuRG9tVXRpbC5yZW1vdmVDbGFzcyh0aGlzLl9jb250YWluZXIsICdsZWFmbGV0LWNvbnRyb2wtZ2VvY29kZXItZXhwYW5kZWQnKTtcbiAgICAgIEwuRG9tVXRpbC5hZGRDbGFzcyh0aGlzLl9hbHRzLCAnbGVhZmxldC1jb250cm9sLWdlb2NvZGVyLWFsdGVybmF0aXZlcy1taW5pbWl6ZWQnKTtcbiAgICAgIEwuRG9tVXRpbC5yZW1vdmVDbGFzcyh0aGlzLl9lcnJvckVsZW1lbnQsICdsZWFmbGV0LWNvbnRyb2wtZ2VvY29kZXItZXJyb3InKTtcbiAgICAgIHRoaXMuX2lucHV0LmJsdXIoKTsgLy8gbW9iaWxlOiBrZXlib2FyZCBzaG91bGRuJ3Qgc3RheSBleHBhbmRlZFxuICAgICAgdGhpcy5maXJlKCdjb2xsYXBzZScpO1xuICAgIH0sXG5cbiAgICBfY2xlYXJSZXN1bHRzOiBmdW5jdGlvbigpIHtcbiAgICAgIEwuRG9tVXRpbC5hZGRDbGFzcyh0aGlzLl9hbHRzLCAnbGVhZmxldC1jb250cm9sLWdlb2NvZGVyLWFsdGVybmF0aXZlcy1taW5pbWl6ZWQnKTtcbiAgICAgIHRoaXMuX3NlbGVjdGlvbiA9IG51bGw7XG4gICAgICBMLkRvbVV0aWwucmVtb3ZlQ2xhc3ModGhpcy5fZXJyb3JFbGVtZW50LCAnbGVhZmxldC1jb250cm9sLWdlb2NvZGVyLWVycm9yJyk7XG4gICAgfSxcblxuICAgIF9jcmVhdGVBbHQ6IGZ1bmN0aW9uKHJlc3VsdCwgaW5kZXgpIHtcbiAgICAgIHZhciBsaSA9IEwuRG9tVXRpbC5jcmVhdGUoJ2xpJywgJycpLFxuICAgICAgICBhID0gTC5Eb21VdGlsLmNyZWF0ZSgnYScsICcnLCBsaSksXG4gICAgICAgIGljb24gPSB0aGlzLm9wdGlvbnMuc2hvd1Jlc3VsdEljb25zICYmIHJlc3VsdC5pY29uID8gTC5Eb21VdGlsLmNyZWF0ZSgnaW1nJywgJycsIGEpIDogbnVsbCxcbiAgICAgICAgdGV4dCA9IHJlc3VsdC5odG1sID8gdW5kZWZpbmVkIDogZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUocmVzdWx0Lm5hbWUpLFxuICAgICAgICBtb3VzZURvd25IYW5kbGVyID0gZnVuY3Rpb24gbW91c2VEb3duSGFuZGxlcihlKSB7XG4gICAgICAgICAgLy8gSW4gc29tZSBicm93c2VycywgYSBjbGljayB3aWxsIGZpcmUgb24gdGhlIG1hcCBpZiB0aGUgY29udHJvbCBpc1xuICAgICAgICAgIC8vIGNvbGxhcHNlZCBkaXJlY3RseSBhZnRlciBtb3VzZWRvd24uIFRvIHdvcmsgYXJvdW5kIHRoaXMsIHdlXG4gICAgICAgICAgLy8gd2FpdCB1bnRpbCB0aGUgY2xpY2sgaXMgY29tcGxldGVkLCBhbmQgX3RoZW5fIGNvbGxhcHNlIHRoZVxuICAgICAgICAgIC8vIGNvbnRyb2wuIE1lc3N5LCBidXQgdGhpcyBpcyB0aGUgd29ya2Fyb3VuZCBJIGNvdWxkIGNvbWUgdXAgd2l0aFxuICAgICAgICAgIC8vIGZvciAjMTQyLlxuICAgICAgICAgIHRoaXMuX3ByZXZlbnRCbHVyQ29sbGFwc2UgPSB0cnVlO1xuICAgICAgICAgIEwuRG9tRXZlbnQuc3RvcChlKTtcbiAgICAgICAgICB0aGlzLl9nZW9jb2RlUmVzdWx0U2VsZWN0ZWQocmVzdWx0KTtcbiAgICAgICAgICBMLkRvbUV2ZW50Lm9uKFxuICAgICAgICAgICAgbGksXG4gICAgICAgICAgICAnY2xpY2snLFxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuY29sbGFwc2VkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY29sbGFwc2UoKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jbGVhclJlc3VsdHMoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRoaXNcbiAgICAgICAgICApO1xuICAgICAgICB9O1xuXG4gICAgICBpZiAoaWNvbikge1xuICAgICAgICBpY29uLnNyYyA9IHJlc3VsdC5pY29uO1xuICAgICAgfVxuXG4gICAgICBsaS5zZXRBdHRyaWJ1dGUoJ2RhdGEtcmVzdWx0LWluZGV4JywgaW5kZXgpO1xuXG4gICAgICBpZiAocmVzdWx0Lmh0bWwpIHtcbiAgICAgICAgYS5pbm5lckhUTUwgPSBhLmlubmVySFRNTCArIHJlc3VsdC5odG1sO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYS5hcHBlbmRDaGlsZCh0ZXh0KTtcbiAgICAgIH1cblxuICAgICAgLy8gVXNlIG1vdXNlZG93biBhbmQgbm90IGNsaWNrLCBzaW5jZSBjbGljayB3aWxsIGZpcmUgX2FmdGVyXyBibHVyLFxuICAgICAgLy8gY2F1c2luZyB0aGUgY29udHJvbCB0byBoYXZlIGNvbGxhcHNlZCBhbmQgcmVtb3ZlZCB0aGUgaXRlbXNcbiAgICAgIC8vIGJlZm9yZSB0aGUgY2xpY2sgY2FuIGZpcmUuXG4gICAgICBMLkRvbUV2ZW50LmFkZExpc3RlbmVyKGxpLCAnbW91c2Vkb3duIHRvdWNoc3RhcnQnLCBtb3VzZURvd25IYW5kbGVyLCB0aGlzKTtcblxuICAgICAgcmV0dXJuIGxpO1xuICAgIH0sXG5cbiAgICBfa2V5ZG93bjogZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIF90aGlzID0gdGhpcyxcbiAgICAgICAgc2VsZWN0ID0gZnVuY3Rpb24gc2VsZWN0KGRpcikge1xuICAgICAgICAgIGlmIChfdGhpcy5fc2VsZWN0aW9uKSB7XG4gICAgICAgICAgICBMLkRvbVV0aWwucmVtb3ZlQ2xhc3MoX3RoaXMuX3NlbGVjdGlvbiwgJ2xlYWZsZXQtY29udHJvbC1nZW9jb2Rlci1zZWxlY3RlZCcpO1xuICAgICAgICAgICAgX3RoaXMuX3NlbGVjdGlvbiA9IF90aGlzLl9zZWxlY3Rpb25bZGlyID4gMCA/ICduZXh0U2libGluZycgOiAncHJldmlvdXNTaWJsaW5nJ107XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghX3RoaXMuX3NlbGVjdGlvbikge1xuICAgICAgICAgICAgX3RoaXMuX3NlbGVjdGlvbiA9IF90aGlzLl9hbHRzW2RpciA+IDAgPyAnZmlyc3RDaGlsZCcgOiAnbGFzdENoaWxkJ107XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKF90aGlzLl9zZWxlY3Rpb24pIHtcbiAgICAgICAgICAgIEwuRG9tVXRpbC5hZGRDbGFzcyhfdGhpcy5fc2VsZWN0aW9uLCAnbGVhZmxldC1jb250cm9sLWdlb2NvZGVyLXNlbGVjdGVkJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICBzd2l0Y2ggKGUua2V5Q29kZSkge1xuICAgICAgICAvLyBFc2NhcGVcbiAgICAgICAgY2FzZSAyNzpcbiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNvbGxhcHNlZCkge1xuICAgICAgICAgICAgdGhpcy5fY29sbGFwc2UoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIC8vIFVwXG4gICAgICAgIGNhc2UgMzg6XG4gICAgICAgICAgc2VsZWN0KC0xKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgLy8gVXBcbiAgICAgICAgY2FzZSA0MDpcbiAgICAgICAgICBzZWxlY3QoMSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIC8vIEVudGVyXG4gICAgICAgIGNhc2UgMTM6XG4gICAgICAgICAgaWYgKHRoaXMuX3NlbGVjdGlvbikge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gcGFyc2VJbnQodGhpcy5fc2VsZWN0aW9uLmdldEF0dHJpYnV0ZSgnZGF0YS1yZXN1bHQtaW5kZXgnKSwgMTApO1xuICAgICAgICAgICAgdGhpcy5fZ2VvY29kZVJlc3VsdFNlbGVjdGVkKHRoaXMuX3Jlc3VsdHNbaW5kZXhdKTtcbiAgICAgICAgICAgIHRoaXMuX2NsZWFyUmVzdWx0cygpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9nZW9jb2RlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0sXG4gICAgX2NoYW5nZTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgdiA9IHRoaXMuX2lucHV0LnZhbHVlO1xuICAgICAgaWYgKHYgIT09IHRoaXMuX2xhc3RHZW9jb2RlKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl9zdWdnZXN0VGltZW91dCk7XG4gICAgICAgIGlmICh2Lmxlbmd0aCA+PSB0aGlzLm9wdGlvbnMuc3VnZ2VzdE1pbkxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuX3N1Z2dlc3RUaW1lb3V0ID0gc2V0VGltZW91dChcbiAgICAgICAgICAgIEwuYmluZChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgdGhpcy5fZ2VvY29kZSh0cnVlKTtcbiAgICAgICAgICAgIH0sIHRoaXMpLFxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLnN1Z2dlc3RUaW1lb3V0XG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl9jbGVhclJlc3VsdHMoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSksXG4gIGZhY3Rvcnk6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IEwuQ29udHJvbC5HZW9jb2RlcihvcHRpb25zKTtcbiAgfVxufTtcblxudmFyIEJpbmcgPSB7XG4gIGNsYXNzOiBMLkNsYXNzLmV4dGVuZCh7XG4gICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oa2V5KSB7XG4gICAgICB0aGlzLmtleSA9IGtleTtcbiAgICB9LFxuXG4gICAgZ2VvY29kZTogZnVuY3Rpb24ocXVlcnksIGNiLCBjb250ZXh0KSB7XG4gICAgICBqc29ucChcbiAgICAgICAgJ2h0dHBzOi8vZGV2LnZpcnR1YWxlYXJ0aC5uZXQvUkVTVC92MS9Mb2NhdGlvbnMnLFxuICAgICAgICB7XG4gICAgICAgICAgcXVlcnk6IHF1ZXJ5LFxuICAgICAgICAgIGtleTogdGhpcy5rZXlcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgIHZhciByZXN1bHRzID0gW107XG4gICAgICAgICAgaWYgKGRhdGEucmVzb3VyY2VTZXRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBkYXRhLnJlc291cmNlU2V0c1swXS5yZXNvdXJjZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgdmFyIHJlc291cmNlID0gZGF0YS5yZXNvdXJjZVNldHNbMF0ucmVzb3VyY2VzW2ldLFxuICAgICAgICAgICAgICAgIGJib3ggPSByZXNvdXJjZS5iYm94O1xuICAgICAgICAgICAgICByZXN1bHRzW2ldID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IHJlc291cmNlLm5hbWUsXG4gICAgICAgICAgICAgICAgYmJveDogTC5sYXRMbmdCb3VuZHMoW2Jib3hbMF0sIGJib3hbMV1dLCBbYmJveFsyXSwgYmJveFszXV0pLFxuICAgICAgICAgICAgICAgIGNlbnRlcjogTC5sYXRMbmcocmVzb3VyY2UucG9pbnQuY29vcmRpbmF0ZXMpXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGNiLmNhbGwoY29udGV4dCwgcmVzdWx0cyk7XG4gICAgICAgIH0sXG4gICAgICAgIHRoaXMsXG4gICAgICAgICdqc29ucCdcbiAgICAgICk7XG4gICAgfSxcblxuICAgIHJldmVyc2U6IGZ1bmN0aW9uKGxvY2F0aW9uLCBzY2FsZSwgY2IsIGNvbnRleHQpIHtcbiAgICAgIGpzb25wKFxuICAgICAgICAnLy9kZXYudmlydHVhbGVhcnRoLm5ldC9SRVNUL3YxL0xvY2F0aW9ucy8nICsgbG9jYXRpb24ubGF0ICsgJywnICsgbG9jYXRpb24ubG5nLFxuICAgICAgICB7XG4gICAgICAgICAga2V5OiB0aGlzLmtleVxuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgdmFyIHJlc3VsdHMgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gZGF0YS5yZXNvdXJjZVNldHNbMF0ucmVzb3VyY2VzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICB2YXIgcmVzb3VyY2UgPSBkYXRhLnJlc291cmNlU2V0c1swXS5yZXNvdXJjZXNbaV0sXG4gICAgICAgICAgICAgIGJib3ggPSByZXNvdXJjZS5iYm94O1xuICAgICAgICAgICAgcmVzdWx0c1tpXSA9IHtcbiAgICAgICAgICAgICAgbmFtZTogcmVzb3VyY2UubmFtZSxcbiAgICAgICAgICAgICAgYmJveDogTC5sYXRMbmdCb3VuZHMoW2Jib3hbMF0sIGJib3hbMV1dLCBbYmJveFsyXSwgYmJveFszXV0pLFxuICAgICAgICAgICAgICBjZW50ZXI6IEwubGF0TG5nKHJlc291cmNlLnBvaW50LmNvb3JkaW5hdGVzKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY2IuY2FsbChjb250ZXh0LCByZXN1bHRzKTtcbiAgICAgICAgfSxcbiAgICAgICAgdGhpcyxcbiAgICAgICAgJ2pzb25wJ1xuICAgICAgKTtcbiAgICB9XG4gIH0pLFxuXG4gIGZhY3Rvcnk6IGZ1bmN0aW9uKGtleSkge1xuICAgIHJldHVybiBuZXcgTC5Db250cm9sLkdlb2NvZGVyLkJpbmcoa2V5KTtcbiAgfVxufTtcblxudmFyIE1hcFF1ZXN0ID0ge1xuICBjbGFzczogTC5DbGFzcy5leHRlbmQoe1xuICAgIG9wdGlvbnM6IHtcbiAgICAgIHNlcnZpY2VVcmw6ICdodHRwczovL3d3dy5tYXBxdWVzdGFwaS5jb20vZ2VvY29kaW5nL3YxJ1xuICAgIH0sXG5cbiAgICBpbml0aWFsaXplOiBmdW5jdGlvbihrZXksIG9wdGlvbnMpIHtcbiAgICAgIC8vIE1hcFF1ZXN0IHNlZW1zIHRvIHByb3ZpZGUgVVJJIGVuY29kZWQgQVBJIGtleXMsXG4gICAgICAvLyBzbyB0byBhdm9pZCBlbmNvZGluZyB0aGVtIHR3aWNlLCB3ZSBkZWNvZGUgdGhlbSBoZXJlXG4gICAgICB0aGlzLl9rZXkgPSBkZWNvZGVVUklDb21wb25lbnQoa2V5KTtcblxuICAgICAgTC5VdGlsLnNldE9wdGlvbnModGhpcywgb3B0aW9ucyk7XG4gICAgfSxcblxuICAgIF9mb3JtYXROYW1lOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciByID0gW10sXG4gICAgICAgIGk7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChhcmd1bWVudHNbaV0pIHtcbiAgICAgICAgICByLnB1c2goYXJndW1lbnRzW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gci5qb2luKCcsICcpO1xuICAgIH0sXG5cbiAgICBnZW9jb2RlOiBmdW5jdGlvbihxdWVyeSwgY2IsIGNvbnRleHQpIHtcbiAgICAgIGdldEpTT04oXG4gICAgICAgIHRoaXMub3B0aW9ucy5zZXJ2aWNlVXJsICsgJy9hZGRyZXNzJyxcbiAgICAgICAge1xuICAgICAgICAgIGtleTogdGhpcy5fa2V5LFxuICAgICAgICAgIGxvY2F0aW9uOiBxdWVyeSxcbiAgICAgICAgICBsaW1pdDogNSxcbiAgICAgICAgICBvdXRGb3JtYXQ6ICdqc29uJ1xuICAgICAgICB9LFxuICAgICAgICBMLmJpbmQoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgIHZhciByZXN1bHRzID0gW10sXG4gICAgICAgICAgICBsb2MsXG4gICAgICAgICAgICBsYXRMbmc7XG4gICAgICAgICAgaWYgKGRhdGEucmVzdWx0cyAmJiBkYXRhLnJlc3VsdHNbMF0ubG9jYXRpb25zKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gZGF0YS5yZXN1bHRzWzBdLmxvY2F0aW9ucy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgICBsb2MgPSBkYXRhLnJlc3VsdHNbMF0ubG9jYXRpb25zW2ldO1xuICAgICAgICAgICAgICBsYXRMbmcgPSBMLmxhdExuZyhsb2MubGF0TG5nKTtcbiAgICAgICAgICAgICAgcmVzdWx0c1tpXSA9IHtcbiAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLl9mb3JtYXROYW1lKGxvYy5zdHJlZXQsIGxvYy5hZG1pbkFyZWE0LCBsb2MuYWRtaW5BcmVhMywgbG9jLmFkbWluQXJlYTEpLFxuICAgICAgICAgICAgICAgIGJib3g6IEwubGF0TG5nQm91bmRzKGxhdExuZywgbGF0TG5nKSxcbiAgICAgICAgICAgICAgICBjZW50ZXI6IGxhdExuZ1xuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGNiLmNhbGwoY29udGV4dCwgcmVzdWx0cyk7XG4gICAgICAgIH0sIHRoaXMpXG4gICAgICApO1xuICAgIH0sXG5cbiAgICByZXZlcnNlOiBmdW5jdGlvbihsb2NhdGlvbiwgc2NhbGUsIGNiLCBjb250ZXh0KSB7XG4gICAgICBnZXRKU09OKFxuICAgICAgICB0aGlzLm9wdGlvbnMuc2VydmljZVVybCArICcvcmV2ZXJzZScsXG4gICAgICAgIHtcbiAgICAgICAgICBrZXk6IHRoaXMuX2tleSxcbiAgICAgICAgICBsb2NhdGlvbjogbG9jYXRpb24ubGF0ICsgJywnICsgbG9jYXRpb24ubG5nLFxuICAgICAgICAgIG91dHB1dEZvcm1hdDogJ2pzb24nXG4gICAgICAgIH0sXG4gICAgICAgIEwuYmluZChmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgdmFyIHJlc3VsdHMgPSBbXSxcbiAgICAgICAgICAgIGxvYyxcbiAgICAgICAgICAgIGxhdExuZztcbiAgICAgICAgICBpZiAoZGF0YS5yZXN1bHRzICYmIGRhdGEucmVzdWx0c1swXS5sb2NhdGlvbnMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBkYXRhLnJlc3VsdHNbMF0ubG9jYXRpb25zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgIGxvYyA9IGRhdGEucmVzdWx0c1swXS5sb2NhdGlvbnNbaV07XG4gICAgICAgICAgICAgIGxhdExuZyA9IEwubGF0TG5nKGxvYy5sYXRMbmcpO1xuICAgICAgICAgICAgICByZXN1bHRzW2ldID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuX2Zvcm1hdE5hbWUobG9jLnN0cmVldCwgbG9jLmFkbWluQXJlYTQsIGxvYy5hZG1pbkFyZWEzLCBsb2MuYWRtaW5BcmVhMSksXG4gICAgICAgICAgICAgICAgYmJveDogTC5sYXRMbmdCb3VuZHMobGF0TG5nLCBsYXRMbmcpLFxuICAgICAgICAgICAgICAgIGNlbnRlcjogbGF0TG5nXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY2IuY2FsbChjb250ZXh0LCByZXN1bHRzKTtcbiAgICAgICAgfSwgdGhpcylcbiAgICAgICk7XG4gICAgfVxuICB9KSxcblxuICBmYWN0b3J5OiBmdW5jdGlvbihrZXksIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IEwuQ29udHJvbC5HZW9jb2Rlci5NYXBRdWVzdChrZXksIG9wdGlvbnMpO1xuICB9XG59O1xuXG52YXIgTWFwYm94ID0ge1xuICBjbGFzczogTC5DbGFzcy5leHRlbmQoe1xuICAgIG9wdGlvbnM6IHtcbiAgICAgIHNlcnZpY2VVcmw6ICdodHRwczovL2FwaS50aWxlcy5tYXBib3guY29tL3Y0L2dlb2NvZGUvbWFwYm94LnBsYWNlcy12MS8nLFxuICAgICAgZ2VvY29kaW5nUXVlcnlQYXJhbXM6IHt9LFxuICAgICAgcmV2ZXJzZVF1ZXJ5UGFyYW1zOiB7fVxuICAgIH0sXG5cbiAgICBpbml0aWFsaXplOiBmdW5jdGlvbihhY2Nlc3NUb2tlbiwgb3B0aW9ucykge1xuICAgICAgTC5zZXRPcHRpb25zKHRoaXMsIG9wdGlvbnMpO1xuICAgICAgdGhpcy5vcHRpb25zLmdlb2NvZGluZ1F1ZXJ5UGFyYW1zLmFjY2Vzc190b2tlbiA9IGFjY2Vzc1Rva2VuO1xuICAgICAgdGhpcy5vcHRpb25zLnJldmVyc2VRdWVyeVBhcmFtcy5hY2Nlc3NfdG9rZW4gPSBhY2Nlc3NUb2tlbjtcbiAgICB9LFxuXG4gICAgZ2VvY29kZTogZnVuY3Rpb24ocXVlcnksIGNiLCBjb250ZXh0KSB7XG4gICAgICB2YXIgcGFyYW1zID0gdGhpcy5vcHRpb25zLmdlb2NvZGluZ1F1ZXJ5UGFyYW1zO1xuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgcGFyYW1zLnByb3hpbWl0eSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgcGFyYW1zLnByb3hpbWl0eS5oYXNPd25Qcm9wZXJ0eSgnbGF0JykgJiZcbiAgICAgICAgcGFyYW1zLnByb3hpbWl0eS5oYXNPd25Qcm9wZXJ0eSgnbG5nJylcbiAgICAgICkge1xuICAgICAgICBwYXJhbXMucHJveGltaXR5ID0gcGFyYW1zLnByb3hpbWl0eS5sbmcgKyAnLCcgKyBwYXJhbXMucHJveGltaXR5LmxhdDtcbiAgICAgIH1cbiAgICAgIGdldEpTT04odGhpcy5vcHRpb25zLnNlcnZpY2VVcmwgKyBlbmNvZGVVUklDb21wb25lbnQocXVlcnkpICsgJy5qc29uJywgcGFyYW1zLCBmdW5jdGlvbihcbiAgICAgICAgZGF0YVxuICAgICAgKSB7XG4gICAgICAgIHZhciByZXN1bHRzID0gW10sXG4gICAgICAgICAgbG9jLFxuICAgICAgICAgIGxhdExuZyxcbiAgICAgICAgICBsYXRMbmdCb3VuZHM7XG4gICAgICAgIGlmIChkYXRhLmZlYXR1cmVzICYmIGRhdGEuZmVhdHVyZXMubGVuZ3RoKSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gZGF0YS5mZWF0dXJlcy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgICAgICAgIGxvYyA9IGRhdGEuZmVhdHVyZXNbaV07XG4gICAgICAgICAgICBsYXRMbmcgPSBMLmxhdExuZyhsb2MuY2VudGVyLnJldmVyc2UoKSk7XG4gICAgICAgICAgICBpZiAobG9jLmhhc093blByb3BlcnR5KCdiYm94JykpIHtcbiAgICAgICAgICAgICAgbGF0TG5nQm91bmRzID0gTC5sYXRMbmdCb3VuZHMoXG4gICAgICAgICAgICAgICAgTC5sYXRMbmcobG9jLmJib3guc2xpY2UoMCwgMikucmV2ZXJzZSgpKSxcbiAgICAgICAgICAgICAgICBMLmxhdExuZyhsb2MuYmJveC5zbGljZSgyLCA0KS5yZXZlcnNlKCkpXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBsYXRMbmdCb3VuZHMgPSBMLmxhdExuZ0JvdW5kcyhsYXRMbmcsIGxhdExuZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXN1bHRzW2ldID0ge1xuICAgICAgICAgICAgICBuYW1lOiBsb2MucGxhY2VfbmFtZSxcbiAgICAgICAgICAgICAgYmJveDogbGF0TG5nQm91bmRzLFxuICAgICAgICAgICAgICBjZW50ZXI6IGxhdExuZ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjYi5jYWxsKGNvbnRleHQsIHJlc3VsdHMpO1xuICAgICAgfSk7XG4gICAgfSxcblxuICAgIHN1Z2dlc3Q6IGZ1bmN0aW9uKHF1ZXJ5LCBjYiwgY29udGV4dCkge1xuICAgICAgcmV0dXJuIHRoaXMuZ2VvY29kZShxdWVyeSwgY2IsIGNvbnRleHQpO1xuICAgIH0sXG5cbiAgICByZXZlcnNlOiBmdW5jdGlvbihsb2NhdGlvbiwgc2NhbGUsIGNiLCBjb250ZXh0KSB7XG4gICAgICBnZXRKU09OKFxuICAgICAgICB0aGlzLm9wdGlvbnMuc2VydmljZVVybCArXG4gICAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KGxvY2F0aW9uLmxuZykgK1xuICAgICAgICAgICcsJyArXG4gICAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KGxvY2F0aW9uLmxhdCkgK1xuICAgICAgICAgICcuanNvbicsXG4gICAgICAgIHRoaXMub3B0aW9ucy5yZXZlcnNlUXVlcnlQYXJhbXMsXG4gICAgICAgIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICB2YXIgcmVzdWx0cyA9IFtdLFxuICAgICAgICAgICAgbG9jLFxuICAgICAgICAgICAgbGF0TG5nLFxuICAgICAgICAgICAgbGF0TG5nQm91bmRzO1xuICAgICAgICAgIGlmIChkYXRhLmZlYXR1cmVzICYmIGRhdGEuZmVhdHVyZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8PSBkYXRhLmZlYXR1cmVzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICAgICAgICBsb2MgPSBkYXRhLmZlYXR1cmVzW2ldO1xuICAgICAgICAgICAgICBsYXRMbmcgPSBMLmxhdExuZyhsb2MuY2VudGVyLnJldmVyc2UoKSk7XG4gICAgICAgICAgICAgIGlmIChsb2MuaGFzT3duUHJvcGVydHkoJ2Jib3gnKSkge1xuICAgICAgICAgICAgICAgIGxhdExuZ0JvdW5kcyA9IEwubGF0TG5nQm91bmRzKFxuICAgICAgICAgICAgICAgICAgTC5sYXRMbmcobG9jLmJib3guc2xpY2UoMCwgMikucmV2ZXJzZSgpKSxcbiAgICAgICAgICAgICAgICAgIEwubGF0TG5nKGxvYy5iYm94LnNsaWNlKDIsIDQpLnJldmVyc2UoKSlcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxhdExuZ0JvdW5kcyA9IEwubGF0TG5nQm91bmRzKGxhdExuZywgbGF0TG5nKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXN1bHRzW2ldID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IGxvYy5wbGFjZV9uYW1lLFxuICAgICAgICAgICAgICAgIGJib3g6IGxhdExuZ0JvdW5kcyxcbiAgICAgICAgICAgICAgICBjZW50ZXI6IGxhdExuZ1xuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGNiLmNhbGwoY29udGV4dCwgcmVzdWx0cyk7XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfVxuICB9KSxcblxuICBmYWN0b3J5OiBmdW5jdGlvbihhY2Nlc3NUb2tlbiwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgTC5Db250cm9sLkdlb2NvZGVyLk1hcGJveChhY2Nlc3NUb2tlbiwgb3B0aW9ucyk7XG4gIH1cbn07XG5cbnZhciBXaGF0M1dvcmRzID0ge1xuICBjbGFzczogTC5DbGFzcy5leHRlbmQoe1xuICAgIG9wdGlvbnM6IHtcbiAgICAgIHNlcnZpY2VVcmw6ICdodHRwczovL2FwaS53aGF0M3dvcmRzLmNvbS92Mi8nXG4gICAgfSxcblxuICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFjY2Vzc1Rva2VuKSB7XG4gICAgICB0aGlzLl9hY2Nlc3NUb2tlbiA9IGFjY2Vzc1Rva2VuO1xuICAgIH0sXG5cbiAgICBnZW9jb2RlOiBmdW5jdGlvbihxdWVyeSwgY2IsIGNvbnRleHQpIHtcbiAgICAgIC8vZ2V0IHRocmVlIHdvcmRzIGFuZCBtYWtlIGEgZG90IGJhc2VkIHN0cmluZ1xuICAgICAgZ2V0SlNPTihcbiAgICAgICAgdGhpcy5vcHRpb25zLnNlcnZpY2VVcmwgKyAnZm9yd2FyZCcsXG4gICAgICAgIHtcbiAgICAgICAgICBrZXk6IHRoaXMuX2FjY2Vzc1Rva2VuLFxuICAgICAgICAgIGFkZHI6IHF1ZXJ5LnNwbGl0KC9cXHMrLykuam9pbignLicpXG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICB2YXIgcmVzdWx0cyA9IFtdLFxuICAgICAgICAgICAgbGF0TG5nLFxuICAgICAgICAgICAgbGF0TG5nQm91bmRzO1xuICAgICAgICAgIGlmIChkYXRhLmhhc093blByb3BlcnR5KCdnZW9tZXRyeScpKSB7XG4gICAgICAgICAgICBsYXRMbmcgPSBMLmxhdExuZyhkYXRhLmdlb21ldHJ5WydsYXQnXSwgZGF0YS5nZW9tZXRyeVsnbG5nJ10pO1xuICAgICAgICAgICAgbGF0TG5nQm91bmRzID0gTC5sYXRMbmdCb3VuZHMobGF0TG5nLCBsYXRMbmcpO1xuICAgICAgICAgICAgcmVzdWx0c1swXSA9IHtcbiAgICAgICAgICAgICAgbmFtZTogZGF0YS53b3JkcyxcbiAgICAgICAgICAgICAgYmJveDogbGF0TG5nQm91bmRzLFxuICAgICAgICAgICAgICBjZW50ZXI6IGxhdExuZ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjYi5jYWxsKGNvbnRleHQsIHJlc3VsdHMpO1xuICAgICAgICB9XG4gICAgICApO1xuICAgIH0sXG5cbiAgICBzdWdnZXN0OiBmdW5jdGlvbihxdWVyeSwgY2IsIGNvbnRleHQpIHtcbiAgICAgIHJldHVybiB0aGlzLmdlb2NvZGUocXVlcnksIGNiLCBjb250ZXh0KTtcbiAgICB9LFxuXG4gICAgcmV2ZXJzZTogZnVuY3Rpb24obG9jYXRpb24sIHNjYWxlLCBjYiwgY29udGV4dCkge1xuICAgICAgZ2V0SlNPTihcbiAgICAgICAgdGhpcy5vcHRpb25zLnNlcnZpY2VVcmwgKyAncmV2ZXJzZScsXG4gICAgICAgIHtcbiAgICAgICAgICBrZXk6IHRoaXMuX2FjY2Vzc1Rva2VuLFxuICAgICAgICAgIGNvb3JkczogW2xvY2F0aW9uLmxhdCwgbG9jYXRpb24ubG5nXS5qb2luKCcsJylcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgIHZhciByZXN1bHRzID0gW10sXG4gICAgICAgICAgICBsYXRMbmcsXG4gICAgICAgICAgICBsYXRMbmdCb3VuZHM7XG4gICAgICAgICAgaWYgKGRhdGEuc3RhdHVzLnN0YXR1cyA9PSAyMDApIHtcbiAgICAgICAgICAgIGxhdExuZyA9IEwubGF0TG5nKGRhdGEuZ2VvbWV0cnlbJ2xhdCddLCBkYXRhLmdlb21ldHJ5WydsbmcnXSk7XG4gICAgICAgICAgICBsYXRMbmdCb3VuZHMgPSBMLmxhdExuZ0JvdW5kcyhsYXRMbmcsIGxhdExuZyk7XG4gICAgICAgICAgICByZXN1bHRzWzBdID0ge1xuICAgICAgICAgICAgICBuYW1lOiBkYXRhLndvcmRzLFxuICAgICAgICAgICAgICBiYm94OiBsYXRMbmdCb3VuZHMsXG4gICAgICAgICAgICAgIGNlbnRlcjogbGF0TG5nXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYi5jYWxsKGNvbnRleHQsIHJlc3VsdHMpO1xuICAgICAgICB9XG4gICAgICApO1xuICAgIH1cbiAgfSksXG5cbiAgZmFjdG9yeTogZnVuY3Rpb24oYWNjZXNzVG9rZW4pIHtcbiAgICByZXR1cm4gbmV3IEwuQ29udHJvbC5HZW9jb2Rlci5XaGF0M1dvcmRzKGFjY2Vzc1Rva2VuKTtcbiAgfVxufTtcblxudmFyIEdvb2dsZSA9IHtcbiAgY2xhc3M6IEwuQ2xhc3MuZXh0ZW5kKHtcbiAgICBvcHRpb25zOiB7XG4gICAgICBzZXJ2aWNlVXJsOiAnaHR0cHM6Ly9tYXBzLmdvb2dsZWFwaXMuY29tL21hcHMvYXBpL2dlb2NvZGUvanNvbicsXG4gICAgICBnZW9jb2RpbmdRdWVyeVBhcmFtczoge30sXG4gICAgICByZXZlcnNlUXVlcnlQYXJhbXM6IHt9XG4gICAgfSxcblxuICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKGtleSwgb3B0aW9ucykge1xuICAgICAgdGhpcy5fa2V5ID0ga2V5O1xuICAgICAgTC5zZXRPcHRpb25zKHRoaXMsIG9wdGlvbnMpO1xuICAgICAgLy8gQmFja3dhcmRzIGNvbXBhdGliaWxpdHlcbiAgICAgIHRoaXMub3B0aW9ucy5zZXJ2aWNlVXJsID0gdGhpcy5vcHRpb25zLnNlcnZpY2VfdXJsIHx8IHRoaXMub3B0aW9ucy5zZXJ2aWNlVXJsO1xuICAgIH0sXG5cbiAgICBnZW9jb2RlOiBmdW5jdGlvbihxdWVyeSwgY2IsIGNvbnRleHQpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgIGFkZHJlc3M6IHF1ZXJ5XG4gICAgICB9O1xuXG4gICAgICBpZiAodGhpcy5fa2V5ICYmIHRoaXMuX2tleS5sZW5ndGgpIHtcbiAgICAgICAgcGFyYW1zLmtleSA9IHRoaXMuX2tleTtcbiAgICAgIH1cblxuICAgICAgcGFyYW1zID0gTC5VdGlsLmV4dGVuZChwYXJhbXMsIHRoaXMub3B0aW9ucy5nZW9jb2RpbmdRdWVyeVBhcmFtcyk7XG5cbiAgICAgIGdldEpTT04odGhpcy5vcHRpb25zLnNlcnZpY2VVcmwsIHBhcmFtcywgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICB2YXIgcmVzdWx0cyA9IFtdLFxuICAgICAgICAgIGxvYyxcbiAgICAgICAgICBsYXRMbmcsXG4gICAgICAgICAgbGF0TG5nQm91bmRzO1xuICAgICAgICBpZiAoZGF0YS5yZXN1bHRzICYmIGRhdGEucmVzdWx0cy5sZW5ndGgpIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8PSBkYXRhLnJlc3VsdHMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICAgICAgICBsb2MgPSBkYXRhLnJlc3VsdHNbaV07XG4gICAgICAgICAgICBsYXRMbmcgPSBMLmxhdExuZyhsb2MuZ2VvbWV0cnkubG9jYXRpb24pO1xuICAgICAgICAgICAgbGF0TG5nQm91bmRzID0gTC5sYXRMbmdCb3VuZHMoXG4gICAgICAgICAgICAgIEwubGF0TG5nKGxvYy5nZW9tZXRyeS52aWV3cG9ydC5ub3J0aGVhc3QpLFxuICAgICAgICAgICAgICBMLmxhdExuZyhsb2MuZ2VvbWV0cnkudmlld3BvcnQuc291dGh3ZXN0KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJlc3VsdHNbaV0gPSB7XG4gICAgICAgICAgICAgIG5hbWU6IGxvYy5mb3JtYXR0ZWRfYWRkcmVzcyxcbiAgICAgICAgICAgICAgYmJveDogbGF0TG5nQm91bmRzLFxuICAgICAgICAgICAgICBjZW50ZXI6IGxhdExuZyxcbiAgICAgICAgICAgICAgcHJvcGVydGllczogbG9jLmFkZHJlc3NfY29tcG9uZW50c1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjYi5jYWxsKGNvbnRleHQsIHJlc3VsdHMpO1xuICAgICAgfSk7XG4gICAgfSxcblxuICAgIHJldmVyc2U6IGZ1bmN0aW9uKGxvY2F0aW9uLCBzY2FsZSwgY2IsIGNvbnRleHQpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgIGxhdGxuZzogZW5jb2RlVVJJQ29tcG9uZW50KGxvY2F0aW9uLmxhdCkgKyAnLCcgKyBlbmNvZGVVUklDb21wb25lbnQobG9jYXRpb24ubG5nKVxuICAgICAgfTtcbiAgICAgIHBhcmFtcyA9IEwuVXRpbC5leHRlbmQocGFyYW1zLCB0aGlzLm9wdGlvbnMucmV2ZXJzZVF1ZXJ5UGFyYW1zKTtcbiAgICAgIGlmICh0aGlzLl9rZXkgJiYgdGhpcy5fa2V5Lmxlbmd0aCkge1xuICAgICAgICBwYXJhbXMua2V5ID0gdGhpcy5fa2V5O1xuICAgICAgfVxuXG4gICAgICBnZXRKU09OKHRoaXMub3B0aW9ucy5zZXJ2aWNlVXJsLCBwYXJhbXMsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgdmFyIHJlc3VsdHMgPSBbXSxcbiAgICAgICAgICBsb2MsXG4gICAgICAgICAgbGF0TG5nLFxuICAgICAgICAgIGxhdExuZ0JvdW5kcztcbiAgICAgICAgaWYgKGRhdGEucmVzdWx0cyAmJiBkYXRhLnJlc3VsdHMubGVuZ3RoKSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gZGF0YS5yZXN1bHRzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICAgICAgbG9jID0gZGF0YS5yZXN1bHRzW2ldO1xuICAgICAgICAgICAgbGF0TG5nID0gTC5sYXRMbmcobG9jLmdlb21ldHJ5LmxvY2F0aW9uKTtcbiAgICAgICAgICAgIGxhdExuZ0JvdW5kcyA9IEwubGF0TG5nQm91bmRzKFxuICAgICAgICAgICAgICBMLmxhdExuZyhsb2MuZ2VvbWV0cnkudmlld3BvcnQubm9ydGhlYXN0KSxcbiAgICAgICAgICAgICAgTC5sYXRMbmcobG9jLmdlb21ldHJ5LnZpZXdwb3J0LnNvdXRod2VzdClcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXN1bHRzW2ldID0ge1xuICAgICAgICAgICAgICBuYW1lOiBsb2MuZm9ybWF0dGVkX2FkZHJlc3MsXG4gICAgICAgICAgICAgIGJib3g6IGxhdExuZ0JvdW5kcyxcbiAgICAgICAgICAgICAgY2VudGVyOiBsYXRMbmcsXG4gICAgICAgICAgICAgIHByb3BlcnRpZXM6IGxvYy5hZGRyZXNzX2NvbXBvbmVudHNcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY2IuY2FsbChjb250ZXh0LCByZXN1bHRzKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSksXG5cbiAgZmFjdG9yeTogZnVuY3Rpb24oa2V5LCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBMLkNvbnRyb2wuR2VvY29kZXIuR29vZ2xlKGtleSwgb3B0aW9ucyk7XG4gIH1cbn07XG5cbnZhciBQaG90b24gPSB7XG4gIGNsYXNzOiBMLkNsYXNzLmV4dGVuZCh7XG4gICAgb3B0aW9uczoge1xuICAgICAgc2VydmljZVVybDogJ2h0dHBzOi8vcGhvdG9uLmtvbW9vdC5kZS9hcGkvJyxcbiAgICAgIHJldmVyc2VVcmw6ICdodHRwczovL3Bob3Rvbi5rb21vb3QuZGUvcmV2ZXJzZS8nLFxuICAgICAgbmFtZVByb3BlcnRpZXM6IFsnbmFtZScsICdzdHJlZXQnLCAnc3VidXJiJywgJ2hhbWxldCcsICd0b3duJywgJ2NpdHknLCAnc3RhdGUnLCAnY291bnRyeSddXG4gICAgfSxcblxuICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIEwuc2V0T3B0aW9ucyh0aGlzLCBvcHRpb25zKTtcbiAgICB9LFxuXG4gICAgZ2VvY29kZTogZnVuY3Rpb24ocXVlcnksIGNiLCBjb250ZXh0KSB7XG4gICAgICB2YXIgcGFyYW1zID0gTC5leHRlbmQoXG4gICAgICAgIHtcbiAgICAgICAgICBxOiBxdWVyeVxuICAgICAgICB9LFxuICAgICAgICB0aGlzLm9wdGlvbnMuZ2VvY29kaW5nUXVlcnlQYXJhbXNcbiAgICAgICk7XG5cbiAgICAgIGdldEpTT04oXG4gICAgICAgIHRoaXMub3B0aW9ucy5zZXJ2aWNlVXJsLFxuICAgICAgICBwYXJhbXMsXG4gICAgICAgIEwuYmluZChmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgY2IuY2FsbChjb250ZXh0LCB0aGlzLl9kZWNvZGVGZWF0dXJlcyhkYXRhKSk7XG4gICAgICAgIH0sIHRoaXMpXG4gICAgICApO1xuICAgIH0sXG5cbiAgICBzdWdnZXN0OiBmdW5jdGlvbihxdWVyeSwgY2IsIGNvbnRleHQpIHtcbiAgICAgIHJldHVybiB0aGlzLmdlb2NvZGUocXVlcnksIGNiLCBjb250ZXh0KTtcbiAgICB9LFxuXG4gICAgcmV2ZXJzZTogZnVuY3Rpb24obGF0TG5nLCBzY2FsZSwgY2IsIGNvbnRleHQpIHtcbiAgICAgIHZhciBwYXJhbXMgPSBMLmV4dGVuZChcbiAgICAgICAge1xuICAgICAgICAgIGxhdDogbGF0TG5nLmxhdCxcbiAgICAgICAgICBsb246IGxhdExuZy5sbmdcbiAgICAgICAgfSxcbiAgICAgICAgdGhpcy5vcHRpb25zLnJldmVyc2VRdWVyeVBhcmFtc1xuICAgICAgKTtcblxuICAgICAgZ2V0SlNPTihcbiAgICAgICAgdGhpcy5vcHRpb25zLnJldmVyc2VVcmwsXG4gICAgICAgIHBhcmFtcyxcbiAgICAgICAgTC5iaW5kKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICBjYi5jYWxsKGNvbnRleHQsIHRoaXMuX2RlY29kZUZlYXR1cmVzKGRhdGEpKTtcbiAgICAgICAgfSwgdGhpcylcbiAgICAgICk7XG4gICAgfSxcblxuICAgIF9kZWNvZGVGZWF0dXJlczogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgdmFyIHJlc3VsdHMgPSBbXSxcbiAgICAgICAgaSxcbiAgICAgICAgZixcbiAgICAgICAgYyxcbiAgICAgICAgbGF0TG5nLFxuICAgICAgICBleHRlbnQsXG4gICAgICAgIGJib3g7XG5cbiAgICAgIGlmIChkYXRhICYmIGRhdGEuZmVhdHVyZXMpIHtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGRhdGEuZmVhdHVyZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBmID0gZGF0YS5mZWF0dXJlc1tpXTtcbiAgICAgICAgICBjID0gZi5nZW9tZXRyeS5jb29yZGluYXRlcztcbiAgICAgICAgICBsYXRMbmcgPSBMLmxhdExuZyhjWzFdLCBjWzBdKTtcbiAgICAgICAgICBleHRlbnQgPSBmLnByb3BlcnRpZXMuZXh0ZW50O1xuXG4gICAgICAgICAgaWYgKGV4dGVudCkge1xuICAgICAgICAgICAgYmJveCA9IEwubGF0TG5nQm91bmRzKFtleHRlbnRbMV0sIGV4dGVudFswXV0sIFtleHRlbnRbM10sIGV4dGVudFsyXV0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBiYm94ID0gTC5sYXRMbmdCb3VuZHMobGF0TG5nLCBsYXRMbmcpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJlc3VsdHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLl9kZW9jb2RlRmVhdHVyZU5hbWUoZiksXG4gICAgICAgICAgICBodG1sOiB0aGlzLm9wdGlvbnMuaHRtbFRlbXBsYXRlID8gdGhpcy5vcHRpb25zLmh0bWxUZW1wbGF0ZShmKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGNlbnRlcjogbGF0TG5nLFxuICAgICAgICAgICAgYmJveDogYmJveCxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IGYucHJvcGVydGllc1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH0sXG5cbiAgICBfZGVvY29kZUZlYXR1cmVOYW1lOiBmdW5jdGlvbihmKSB7XG4gICAgICB2YXIgaiwgbmFtZTtcbiAgICAgIGZvciAoaiA9IDA7ICFuYW1lICYmIGogPCB0aGlzLm9wdGlvbnMubmFtZVByb3BlcnRpZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgbmFtZSA9IGYucHJvcGVydGllc1t0aGlzLm9wdGlvbnMubmFtZVByb3BlcnRpZXNbal1dO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmFtZTtcbiAgICB9XG4gIH0pLFxuXG4gIGZhY3Rvcnk6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IEwuQ29udHJvbC5HZW9jb2Rlci5QaG90b24ob3B0aW9ucyk7XG4gIH1cbn07XG5cbnZhciBNYXB6ZW4gPSB7XG4gIGNsYXNzOiBMLkNsYXNzLmV4dGVuZCh7XG4gICAgb3B0aW9uczoge1xuICAgICAgc2VydmljZVVybDogJ2h0dHBzOi8vc2VhcmNoLm1hcHplbi5jb20vdjEnLFxuICAgICAgZ2VvY29kaW5nUXVlcnlQYXJhbXM6IHt9LFxuICAgICAgcmV2ZXJzZVF1ZXJ5UGFyYW1zOiB7fVxuICAgIH0sXG5cbiAgICBpbml0aWFsaXplOiBmdW5jdGlvbihhcGlLZXksIG9wdGlvbnMpIHtcbiAgICAgIEwuVXRpbC5zZXRPcHRpb25zKHRoaXMsIG9wdGlvbnMpO1xuICAgICAgdGhpcy5fYXBpS2V5ID0gYXBpS2V5O1xuICAgICAgdGhpcy5fbGFzdFN1Z2dlc3QgPSAwO1xuICAgIH0sXG5cbiAgICBnZW9jb2RlOiBmdW5jdGlvbihxdWVyeSwgY2IsIGNvbnRleHQpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICBnZXRKU09OKFxuICAgICAgICB0aGlzLm9wdGlvbnMuc2VydmljZVVybCArICcvc2VhcmNoJyxcbiAgICAgICAgTC5leHRlbmQoXG4gICAgICAgICAge1xuICAgICAgICAgICAgYXBpX2tleTogdGhpcy5fYXBpS2V5LFxuICAgICAgICAgICAgdGV4dDogcXVlcnlcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRoaXMub3B0aW9ucy5nZW9jb2RpbmdRdWVyeVBhcmFtc1xuICAgICAgICApLFxuICAgICAgICBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgY2IuY2FsbChjb250ZXh0LCBfdGhpcy5fcGFyc2VSZXN1bHRzKGRhdGEsICdiYm94JykpO1xuICAgICAgICB9XG4gICAgICApO1xuICAgIH0sXG5cbiAgICBzdWdnZXN0OiBmdW5jdGlvbihxdWVyeSwgY2IsIGNvbnRleHQpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICBnZXRKU09OKFxuICAgICAgICB0aGlzLm9wdGlvbnMuc2VydmljZVVybCArICcvYXV0b2NvbXBsZXRlJyxcbiAgICAgICAgTC5leHRlbmQoXG4gICAgICAgICAge1xuICAgICAgICAgICAgYXBpX2tleTogdGhpcy5fYXBpS2V5LFxuICAgICAgICAgICAgdGV4dDogcXVlcnlcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRoaXMub3B0aW9ucy5nZW9jb2RpbmdRdWVyeVBhcmFtc1xuICAgICAgICApLFxuICAgICAgICBMLmJpbmQoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgIGlmIChkYXRhLmdlb2NvZGluZy50aW1lc3RhbXAgPiB0aGlzLl9sYXN0U3VnZ2VzdCkge1xuICAgICAgICAgICAgdGhpcy5fbGFzdFN1Z2dlc3QgPSBkYXRhLmdlb2NvZGluZy50aW1lc3RhbXA7XG4gICAgICAgICAgICBjYi5jYWxsKGNvbnRleHQsIF90aGlzLl9wYXJzZVJlc3VsdHMoZGF0YSwgJ2Jib3gnKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCB0aGlzKVxuICAgICAgKTtcbiAgICB9LFxuXG4gICAgcmV2ZXJzZTogZnVuY3Rpb24obG9jYXRpb24sIHNjYWxlLCBjYiwgY29udGV4dCkge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgIGdldEpTT04oXG4gICAgICAgIHRoaXMub3B0aW9ucy5zZXJ2aWNlVXJsICsgJy9yZXZlcnNlJyxcbiAgICAgICAgTC5leHRlbmQoXG4gICAgICAgICAge1xuICAgICAgICAgICAgYXBpX2tleTogdGhpcy5fYXBpS2V5LFxuICAgICAgICAgICAgJ3BvaW50LmxhdCc6IGxvY2F0aW9uLmxhdCxcbiAgICAgICAgICAgICdwb2ludC5sb24nOiBsb2NhdGlvbi5sbmdcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRoaXMub3B0aW9ucy5yZXZlcnNlUXVlcnlQYXJhbXNcbiAgICAgICAgKSxcbiAgICAgICAgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgIGNiLmNhbGwoY29udGV4dCwgX3RoaXMuX3BhcnNlUmVzdWx0cyhkYXRhLCAnYm91bmRzJykpO1xuICAgICAgICB9XG4gICAgICApO1xuICAgIH0sXG5cbiAgICBfcGFyc2VSZXN1bHRzOiBmdW5jdGlvbihkYXRhLCBiYm94bmFtZSkge1xuICAgICAgdmFyIHJlc3VsdHMgPSBbXTtcbiAgICAgIEwuZ2VvSnNvbihkYXRhLCB7XG4gICAgICAgIHBvaW50VG9MYXllcjogZnVuY3Rpb24oZmVhdHVyZSwgbGF0bG5nKSB7XG4gICAgICAgICAgcmV0dXJuIEwuY2lyY2xlTWFya2VyKGxhdGxuZyk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uRWFjaEZlYXR1cmU6IGZ1bmN0aW9uKGZlYXR1cmUsIGxheWVyKSB7XG4gICAgICAgICAgdmFyIHJlc3VsdCA9IHt9LFxuICAgICAgICAgICAgYmJveCxcbiAgICAgICAgICAgIGNlbnRlcjtcblxuICAgICAgICAgIGlmIChsYXllci5nZXRCb3VuZHMpIHtcbiAgICAgICAgICAgIGJib3ggPSBsYXllci5nZXRCb3VuZHMoKTtcbiAgICAgICAgICAgIGNlbnRlciA9IGJib3guZ2V0Q2VudGVyKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNlbnRlciA9IGxheWVyLmdldExhdExuZygpO1xuICAgICAgICAgICAgYmJveCA9IEwubGF0TG5nQm91bmRzKGNlbnRlciwgY2VudGVyKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXN1bHQubmFtZSA9IGxheWVyLmZlYXR1cmUucHJvcGVydGllcy5sYWJlbDtcbiAgICAgICAgICByZXN1bHQuY2VudGVyID0gY2VudGVyO1xuICAgICAgICAgIHJlc3VsdFtiYm94bmFtZV0gPSBiYm94O1xuICAgICAgICAgIHJlc3VsdC5wcm9wZXJ0aWVzID0gbGF5ZXIuZmVhdHVyZS5wcm9wZXJ0aWVzO1xuICAgICAgICAgIHJlc3VsdHMucHVzaChyZXN1bHQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH1cbiAgfSksXG5cbiAgZmFjdG9yeTogZnVuY3Rpb24oYXBpS2V5LCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBMLkNvbnRyb2wuR2VvY29kZXIuTWFwemVuKGFwaUtleSwgb3B0aW9ucyk7XG4gIH1cbn07XG5cbnZhciBBcmNHaXMgPSB7XG4gIGNsYXNzOiBMLkNsYXNzLmV4dGVuZCh7XG4gICAgb3B0aW9uczoge1xuICAgICAgc2VydmljZV91cmw6ICdodHRwOi8vZ2VvY29kZS5hcmNnaXMuY29tL2FyY2dpcy9yZXN0L3NlcnZpY2VzL1dvcmxkL0dlb2NvZGVTZXJ2ZXInXG4gICAgfSxcblxuICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFjY2Vzc1Rva2VuLCBvcHRpb25zKSB7XG4gICAgICBMLnNldE9wdGlvbnModGhpcywgb3B0aW9ucyk7XG4gICAgICB0aGlzLl9hY2Nlc3NUb2tlbiA9IGFjY2Vzc1Rva2VuO1xuICAgIH0sXG5cbiAgICBnZW9jb2RlOiBmdW5jdGlvbihxdWVyeSwgY2IsIGNvbnRleHQpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgIFNpbmdsZUxpbmU6IHF1ZXJ5LFxuICAgICAgICBvdXRGaWVsZHM6ICdBZGRyX1R5cGUnLFxuICAgICAgICBmb3JTdG9yYWdlOiBmYWxzZSxcbiAgICAgICAgbWF4TG9jYXRpb25zOiAxMCxcbiAgICAgICAgZjogJ2pzb24nXG4gICAgICB9O1xuXG4gICAgICBpZiAodGhpcy5fa2V5ICYmIHRoaXMuX2tleS5sZW5ndGgpIHtcbiAgICAgICAgcGFyYW1zLnRva2VuID0gdGhpcy5fa2V5O1xuICAgICAgfVxuXG4gICAgICBnZXRKU09OKHRoaXMub3B0aW9ucy5zZXJ2aWNlX3VybCArICcvZmluZEFkZHJlc3NDYW5kaWRhdGVzJywgcGFyYW1zLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIHZhciByZXN1bHRzID0gW10sXG4gICAgICAgICAgbG9jLFxuICAgICAgICAgIGxhdExuZyxcbiAgICAgICAgICBsYXRMbmdCb3VuZHM7XG5cbiAgICAgICAgaWYgKGRhdGEuY2FuZGlkYXRlcyAmJiBkYXRhLmNhbmRpZGF0ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gZGF0YS5jYW5kaWRhdGVzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICAgICAgbG9jID0gZGF0YS5jYW5kaWRhdGVzW2ldO1xuICAgICAgICAgICAgbGF0TG5nID0gTC5sYXRMbmcobG9jLmxvY2F0aW9uLnksIGxvYy5sb2NhdGlvbi54KTtcbiAgICAgICAgICAgIGxhdExuZ0JvdW5kcyA9IEwubGF0TG5nQm91bmRzKFxuICAgICAgICAgICAgICBMLmxhdExuZyhsb2MuZXh0ZW50LnltYXgsIGxvYy5leHRlbnQueG1heCksXG4gICAgICAgICAgICAgIEwubGF0TG5nKGxvYy5leHRlbnQueW1pbiwgbG9jLmV4dGVudC54bWluKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJlc3VsdHNbaV0gPSB7XG4gICAgICAgICAgICAgIG5hbWU6IGxvYy5hZGRyZXNzLFxuICAgICAgICAgICAgICBiYm94OiBsYXRMbmdCb3VuZHMsXG4gICAgICAgICAgICAgIGNlbnRlcjogbGF0TG5nXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNiLmNhbGwoY29udGV4dCwgcmVzdWx0cyk7XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgc3VnZ2VzdDogZnVuY3Rpb24ocXVlcnksIGNiLCBjb250ZXh0KSB7XG4gICAgICByZXR1cm4gdGhpcy5nZW9jb2RlKHF1ZXJ5LCBjYiwgY29udGV4dCk7XG4gICAgfSxcblxuICAgIHJldmVyc2U6IGZ1bmN0aW9uKGxvY2F0aW9uLCBzY2FsZSwgY2IsIGNvbnRleHQpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgIGxvY2F0aW9uOiBlbmNvZGVVUklDb21wb25lbnQobG9jYXRpb24ubG5nKSArICcsJyArIGVuY29kZVVSSUNvbXBvbmVudChsb2NhdGlvbi5sYXQpLFxuICAgICAgICBkaXN0YW5jZTogMTAwLFxuICAgICAgICBmOiAnanNvbidcbiAgICAgIH07XG5cbiAgICAgIGdldEpTT04odGhpcy5vcHRpb25zLnNlcnZpY2VfdXJsICsgJy9yZXZlcnNlR2VvY29kZScsIHBhcmFtcywgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gW10sXG4gICAgICAgICAgbG9jO1xuXG4gICAgICAgIGlmIChkYXRhICYmICFkYXRhLmVycm9yKSB7XG4gICAgICAgICAgbG9jID0gTC5sYXRMbmcoZGF0YS5sb2NhdGlvbi55LCBkYXRhLmxvY2F0aW9uLngpO1xuICAgICAgICAgIHJlc3VsdC5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IGRhdGEuYWRkcmVzcy5NYXRjaF9hZGRyLFxuICAgICAgICAgICAgY2VudGVyOiBsb2MsXG4gICAgICAgICAgICBib3VuZHM6IEwubGF0TG5nQm91bmRzKGxvYywgbG9jKVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY2IuY2FsbChjb250ZXh0LCByZXN1bHQpO1xuICAgICAgfSk7XG4gICAgfVxuICB9KSxcblxuICBmYWN0b3J5OiBmdW5jdGlvbihhY2Nlc3NUb2tlbiwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgTC5Db250cm9sLkdlb2NvZGVyLkFyY0dpcyhhY2Nlc3NUb2tlbiwgb3B0aW9ucyk7XG4gIH1cbn07XG5cbnZhciBIRVJFID0ge1xuICBjbGFzczogTC5DbGFzcy5leHRlbmQoe1xuICAgIG9wdGlvbnM6IHtcbiAgICAgIGdlb2NvZGVVcmw6ICdodHRwOi8vZ2VvY29kZXIuYXBpLmhlcmUuY29tLzYuMi9nZW9jb2RlLmpzb24nLFxuICAgICAgcmV2ZXJzZUdlb2NvZGVVcmw6ICdodHRwOi8vcmV2ZXJzZS5nZW9jb2Rlci5hcGkuaGVyZS5jb20vNi4yL3JldmVyc2VnZW9jb2RlLmpzb24nLFxuICAgICAgYXBwX2lkOiAnPGluc2VydCB5b3VyIGFwcF9pZCBoZXJlPicsXG4gICAgICBhcHBfY29kZTogJzxpbnNlcnQgeW91ciBhcHBfY29kZSBoZXJlPicsXG4gICAgICBnZW9jb2RpbmdRdWVyeVBhcmFtczoge30sXG4gICAgICByZXZlcnNlUXVlcnlQYXJhbXM6IHt9XG4gICAgfSxcblxuICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIEwuc2V0T3B0aW9ucyh0aGlzLCBvcHRpb25zKTtcbiAgICB9LFxuXG4gICAgZ2VvY29kZTogZnVuY3Rpb24ocXVlcnksIGNiLCBjb250ZXh0KSB7XG4gICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICBzZWFyY2h0ZXh0OiBxdWVyeSxcbiAgICAgICAgZ2VuOiA5LFxuICAgICAgICBhcHBfaWQ6IHRoaXMub3B0aW9ucy5hcHBfaWQsXG4gICAgICAgIGFwcF9jb2RlOiB0aGlzLm9wdGlvbnMuYXBwX2NvZGUsXG4gICAgICAgIGpzb25hdHRyaWJ1dGVzOiAxXG4gICAgICB9O1xuICAgICAgcGFyYW1zID0gTC5VdGlsLmV4dGVuZChwYXJhbXMsIHRoaXMub3B0aW9ucy5nZW9jb2RpbmdRdWVyeVBhcmFtcyk7XG4gICAgICB0aGlzLmdldEpTT04odGhpcy5vcHRpb25zLmdlb2NvZGVVcmwsIHBhcmFtcywgY2IsIGNvbnRleHQpO1xuICAgIH0sXG5cbiAgICByZXZlcnNlOiBmdW5jdGlvbihsb2NhdGlvbiwgc2NhbGUsIGNiLCBjb250ZXh0KSB7XG4gICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICBwcm94OiBlbmNvZGVVUklDb21wb25lbnQobG9jYXRpb24ubGF0KSArICcsJyArIGVuY29kZVVSSUNvbXBvbmVudChsb2NhdGlvbi5sbmcpLFxuICAgICAgICBtb2RlOiAncmV0cmlldmVBZGRyZXNzZXMnLFxuICAgICAgICBhcHBfaWQ6IHRoaXMub3B0aW9ucy5hcHBfaWQsXG4gICAgICAgIGFwcF9jb2RlOiB0aGlzLm9wdGlvbnMuYXBwX2NvZGUsXG4gICAgICAgIGdlbjogOSxcbiAgICAgICAganNvbmF0dHJpYnV0ZXM6IDFcbiAgICAgIH07XG4gICAgICBwYXJhbXMgPSBMLlV0aWwuZXh0ZW5kKHBhcmFtcywgdGhpcy5vcHRpb25zLnJldmVyc2VRdWVyeVBhcmFtcyk7XG4gICAgICB0aGlzLmdldEpTT04odGhpcy5vcHRpb25zLnJldmVyc2VHZW9jb2RlVXJsLCBwYXJhbXMsIGNiLCBjb250ZXh0KTtcbiAgICB9LFxuXG4gICAgZ2V0SlNPTjogZnVuY3Rpb24odXJsLCBwYXJhbXMsIGNiLCBjb250ZXh0KSB7XG4gICAgICBnZXRKU09OKHVybCwgcGFyYW1zLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIHZhciByZXN1bHRzID0gW10sXG4gICAgICAgICAgbG9jLFxuICAgICAgICAgIGxhdExuZyxcbiAgICAgICAgICBsYXRMbmdCb3VuZHM7XG4gICAgICAgIGlmIChkYXRhLnJlc3BvbnNlLnZpZXcgJiYgZGF0YS5yZXNwb25zZS52aWV3Lmxlbmd0aCkge1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IGRhdGEucmVzcG9uc2Uudmlld1swXS5yZXN1bHQubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICAgICAgICBsb2MgPSBkYXRhLnJlc3BvbnNlLnZpZXdbMF0ucmVzdWx0W2ldLmxvY2F0aW9uO1xuICAgICAgICAgICAgbGF0TG5nID0gTC5sYXRMbmcobG9jLmRpc3BsYXlQb3NpdGlvbi5sYXRpdHVkZSwgbG9jLmRpc3BsYXlQb3NpdGlvbi5sb25naXR1ZGUpO1xuICAgICAgICAgICAgbGF0TG5nQm91bmRzID0gTC5sYXRMbmdCb3VuZHMoXG4gICAgICAgICAgICAgIEwubGF0TG5nKGxvYy5tYXBWaWV3LnRvcExlZnQubGF0aXR1ZGUsIGxvYy5tYXBWaWV3LnRvcExlZnQubG9uZ2l0dWRlKSxcbiAgICAgICAgICAgICAgTC5sYXRMbmcobG9jLm1hcFZpZXcuYm90dG9tUmlnaHQubGF0aXR1ZGUsIGxvYy5tYXBWaWV3LmJvdHRvbVJpZ2h0LmxvbmdpdHVkZSlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXN1bHRzW2ldID0ge1xuICAgICAgICAgICAgICBuYW1lOiBsb2MuYWRkcmVzcy5sYWJlbCxcbiAgICAgICAgICAgICAgYmJveDogbGF0TG5nQm91bmRzLFxuICAgICAgICAgICAgICBjZW50ZXI6IGxhdExuZ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2IuY2FsbChjb250ZXh0LCByZXN1bHRzKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSksXG5cbiAgZmFjdG9yeTogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgTC5Db250cm9sLkdlb2NvZGVyLkhFUkUob3B0aW9ucyk7XG4gIH1cbn07XG5cbnZhciBHZW9jb2RlciA9IEwuVXRpbC5leHRlbmQoQ29udHJvbC5jbGFzcywge1xuICBOb21pbmF0aW06IE5vbWluYXRpbS5jbGFzcyxcbiAgbm9taW5hdGltOiBOb21pbmF0aW0uZmFjdG9yeSxcbiAgQmluZzogQmluZy5jbGFzcyxcbiAgYmluZzogQmluZy5mYWN0b3J5LFxuICBNYXBRdWVzdDogTWFwUXVlc3QuY2xhc3MsXG4gIG1hcFF1ZXN0OiBNYXBRdWVzdC5mYWN0b3J5LFxuICBNYXBib3g6IE1hcGJveC5jbGFzcyxcbiAgbWFwYm94OiBNYXBib3guZmFjdG9yeSxcbiAgV2hhdDNXb3JkczogV2hhdDNXb3Jkcy5jbGFzcyxcbiAgd2hhdDN3b3JkczogV2hhdDNXb3Jkcy5mYWN0b3J5LFxuICBHb29nbGU6IEdvb2dsZS5jbGFzcyxcbiAgZ29vZ2xlOiBHb29nbGUuZmFjdG9yeSxcbiAgUGhvdG9uOiBQaG90b24uY2xhc3MsXG4gIHBob3RvbjogUGhvdG9uLmZhY3RvcnksXG4gIE1hcHplbjogTWFwemVuLmNsYXNzLFxuICBtYXB6ZW46IE1hcHplbi5mYWN0b3J5LFxuICBBcmNHaXM6IEFyY0dpcy5jbGFzcyxcbiAgYXJjZ2lzOiBBcmNHaXMuZmFjdG9yeSxcbiAgSEVSRTogSEVSRS5jbGFzcyxcbiAgaGVyZTogSEVSRS5mYWN0b3J5XG59KTtcblxuTC5VdGlsLmV4dGVuZChMLkNvbnRyb2wsIHtcbiAgR2VvY29kZXI6IEdlb2NvZGVyLFxuICBnZW9jb2RlcjogQ29udHJvbC5mYWN0b3J5XG59KTtcblxucmV0dXJuIEdlb2NvZGVyO1xuXG59KEwpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbnRyb2wuR2VvY29kZXIuanMubWFwXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9sZWFmbGV0LWNvbnRyb2wtZ2VvY29kZXIvZGlzdC9Db250cm9sLkdlb2NvZGVyLmpzXG4vLyBtb2R1bGUgaWQgPSA3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///7\n");

/***/ })
/******/ ]);